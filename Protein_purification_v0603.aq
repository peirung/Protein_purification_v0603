{"config":{"title":"His-tagged Protein Purification","description":"His-tagged Protein Purification","copyright":"Klavins Lab","version":"1.0.1","authors":[{"name":"Pei-Rung Wu","affiliation":"Klavins Lab @ UW"}],"maintainer":{"name":"Pei-Rung Wu","email":"peirung@uw.edu"},"acknowledgements":null,"github":{"user":"peirung","repo":"Protein_purification_v0603"},"keywords":null,"aquadoc_version":"1.0.0","aquarium_version":"\u003c%= Bioturk::Application.config.aquarium_version %\u003e"},"components":[{"sample_types":[{"id":81,"name":"Resin","description":"Resin","created_at":"2018-10-02T14:15:06.000-07:00","updated_at":"2018-10-02T14:17:30.000-07:00","field_types":[]}],"object_types":[{"id":828,"name":"Column","description":"packed column with resin for protein purification","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2019-01-08T13:23:03.000-08:00","updated_at":"2019-01-08T13:23:03.000-08:00","unit":"column","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":81,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Resin"}],"operation_type":{"name":"Column Packing","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"output","name":"Affinity Column","sample_types":["Resin"],"object_types":["Column"],"part":false,"array":false,"routing":"B","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\r\n\r\nneeds \"Standard Libs/Feedback\"\r\n\r\nclass Protocol\r\n  include Feedback\r\n  def main\r\n\r\n    operations.retrieve.make\r\n    \r\n    op_out_column = []\r\n    op_count = 0\r\n\r\n    operations.each do |op|\r\n        op_count = op_count + 1\r\n        op_out_column \u003c\u003c op.output(\"Affinity Column\").item.id\r\n    end\r\n    \r\n    tube_count = (op_count*20/50).floor\r\n        if remainer = (op_count*20 % 50) != 0\r\n            tube_count = tube_count + 1\r\n        end\r\n    \r\n    label_column(op_count,op_out_column)\r\n        \r\n    put_column_onto_stand\r\n        \r\n    mix_resin(op_count, op_out_column)\r\n        \r\n    load_20ml_binding_buffer(op_out_column)\r\n    \r\n    clean_up\r\n    \r\n    operations.store\r\n    \r\n    get_protocol_feedback\r\n\r\n    return {}\r\n  end\r\n  \r\n  #prepare binding buffer (30mM imidazole_final concentration)\r\n  #20mL/per column, imidazole aliquot concentration: 5M\r\n  def prepare_binding_buffer(op_count,tube_count)\r\n    op_table = [[\"Item\",\"Volume\"],\r\n    [\"Purification buffer\",{content:\"#{op_count*23} mL\", check: true}],\r\n    [\"Imidazole aliquot\",{content:\"#{op_count*138} µl\", check: true}]\r\n    ]\r\n    show do\r\n        title \"Prepare binding buffer\"\r\n        check \"Grab a beaker.\"\r\n        note \"Write \u003cb\u003eBinding buffer\u003c/b\u003e on a piece of lab tape and affix it on the beaker.\"\r\n        bullet \"Grab the following items:\"\r\n        note \"Purification buffer, in the Media Bay\"\r\n        note \"Imidazole aliquot, in a box labeled \u003cb\u003eProtein purification\u003c/b\u003e in -20°C freezer (B1-165)\"\r\n        bullet \"Prepare binding buffer according to the table.\"\r\n        table op_table\r\n        note \"Return the buffer and aliquot to the Media Bay and storage box.\"\r\n        #image \"Actions/ProteinPurification/purification_buffer.jpg\"\r\n    end\r\n  end\r\n\r\n  def label_column(op_count,op_out_column)\r\n    show do \r\n      title \"Grab and label columns\"\r\n      check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e column(s) and label the column with ID: #{op_out_column.to_sentence}.\"\r\n      check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e flow adaptor(s).\"\r\n      check \"Remove the snap-off tip at the bottom of the column. Attach a flow adaptor to it (as shown in the picture).\"\r\n      image \"Actions/ProteinPurification/empty_column_column_packing.jpg\"\r\n    end\r\n    \r\n    show do\r\n        title \"Column preparation\"\r\n        check \"Close the column outlet.\"\r\n        image \"Actions/ProteinPurification/oulet_column_packing.jpg\"\r\n    end\r\n  end\r\n  \r\n  def put_column_onto_stand\r\n    show do\r\n       title \"Column preparation\"\r\n       check \"Grab a support stand and clamps. Clamp a column to the support stand.\"\r\n       check \"If you are packing more than two columns, grab tubes racks and a storage box to set up a support stand for columns (as shown in the picture)\"\r\n       image \"Actions/ProteinPurification/packing_four_columns.jpg\"\r\n    end\r\n  end\r\n  \r\n  def mix_resin(op_count, op_out_column)\r\n    op_table = [[\"Column ID\",\"Bed volume of Ni-NTA resin\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c {content:op_out_column[i], check: true}\r\n        row \u003c\u003c \"2 mL\"\r\n        op_table \u003c\u003c row\r\n    end\r\n    show do\r\n       title \"Load Ni-NTA resin\"\r\n       note \"Perform the steps with the columns: #{op_out_column.to_sentence}.\"\r\n       check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 50 mL Falcon tubes and label with #{op_out_column.to_sentence}.\"\r\n       check \"Place the tubes underneath the corresponding column.\"\r\n       check \"Grab Ni-NTA resin from 4°C refrigerator (R1-250). \"\r\n       check \"Pipet up and down to homogenize the resin by using a P1000 pipettor.\"\r\n       check \"Load 2 mL of Ni-NTA slurry to each column.\"\r\n       check \"Open the column outlet and let the liquid flow through the column.\"\r\n       check \"Check on the resin volume in the column. The volume should be betweeen 1.0-1.5mL mark on the column.\"\r\n       check \"Add more resin to the column if the volume is less than 1 mL.\"\r\n       check \"Return the resin to 4°C refrigerator (R1-250).\"\r\n       image \"Actions/ProteinPurification/resin_column_packing.jpg\"\r\n    end\r\n  end\r\n  \r\n  def load_20ml_binding_buffer(op_out_column)\r\n    show do\r\n       title \"Equilibrate Resin\"\r\n       note \"Perform the steps with the columns: #{op_out_column.to_sentence}.\"\r\n       check \"Close the column outlet.\"\r\n       check \"Grab the purification buffer from 4°C refrigerator.\"\r\n       check \"Grab a motorized pipet and 25 mL serological pipette.\"\r\n       check \"Drip 20 mL of purification buffer to each column along the column wall.\"\r\n    end\r\n  end\r\n  \r\n  def clean_up\r\n    show do\r\n        title \"Clean up\"\r\n        check \"Return the purification buffer to 4°C refrigerator.\"\r\n        check \"Return the motorized pipet and discard the used serological pipette.\"\r\n    end\r\n  end\r\n  \r\n  \r\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to prepare a column packed with Ni-NTA resin and pre-equilibrate with binding buffer.\r\n\r\n- Workflow:\r\n  - Harvest Cell \u003e *Column Packing* \u003e Lyse Cell \r\n- Steps:\r\n  - [01] Prepare binding buffer.\r\n  - [02] Grab a column and attach an adaptor to it.\r\n  - [03] Clamp the column to a support stand.\r\n  - [04] Load Ni-NTA resin into the column.\r\n  - [05] Equilibrate Resin by the binding buffer.","test":"","timing":null}},{"sample_types":[{"id":82,"name":"Protein","description":"Protein","created_at":"2018-10-09T11:41:26.000-07:00","updated_at":"2018-10-09T11:41:26.000-07:00","field_types":[{"id":6524,"parent_id":82,"name":"Size","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2018-10-30T20:47:00.000-07:00","updated_at":"2018-10-30T20:47:00.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7070,"parent_id":82,"name":"Wash_Buffer","ftype":"number","choices":"5,10,15,30,0","array":false,"required":true,"created_at":"2018-11-30T14:46:57.000-08:00","updated_at":"2018-11-30T14:46:57.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":816,"name":"Protein Elution","description":"Protein eluted by imidazole","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:57:58.000-07:00","updated_at":"2018-11-27T19:09:54.000-08:00","unit":"Protein","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":82,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Protein"},{"id":814,"name":"Concentrated Protein","description":"Concentrated protein elution in the concentrator","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:53:05.000-07:00","updated_at":"2018-11-27T08:39:21.000-08:00","unit":"Protein","cost":0.01,"release_method":"return","release_description":"","sample_type_id":82,"image":"","prefix":"M20","rows":null,"columns":null,"sample_type_name":"Protein"}],"operation_type":{"name":"Concentrate Protein","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Protein","sample_types":["Protein"],"object_types":["Protein Elution"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Protein","sample_types":["Protein"],"object_types":["Concentrated Protein"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\n\nneeds \"Standard Libs/Feedback\"\n\nclass Protocol\n  include Feedback\n  def main\n    \n    operations.retrieve.make\n\n    op_in_protein = []\n    op_out_protein = []\n    op_in_protein_leng = []\n    op_in_protein_tube = []\n    op_count = 0\n    operations.running.each do |op|\n        # added 3/26 protein_length\n        #op.set_input_data(\"Protein\", :Size, Random.rand(10..50)) if debug\n        \n        tmp_size = op.output(\"Protein\").sample.properties[\"Size\"].to_f\n        #tmp_size = Random.rand(10..50) if debug\n\n        op_count = op_count + 1\n        op_in_protein \u003c\u003c op.input(\"Protein\").item.id\n        op_out_protein \u003c\u003c op.output(\"Protein\").item.id\n        \n        # added 3/26 protein_length\n        op_in_protein_leng \u003c\u003c tmp_size.to_f.round(0)\n        \n        if tmp_size.to_f \u003e= 40\n            op_in_protein_tube \u003c\u003c \"White Membrane\"\n        else\n            op_in_protein_tube \u003c\u003c \"Green Membrane\"\n        end\n    end\n\n    # Set the Refrigerated Centrifuge to 4°C first.\n    set_refrig_centrifuge_temp\n        \n    # Take one concentrator and label it with design ID.\n    take_and_label_concentrator(op_count,op_in_protein_leng,op_in_protein_tube)\n        \n    add_sample_to_tube(op_count,op_in_protein)\n        \n    add_elution_and_centrifuge(op_count,op_in_protein)\n    \n    buffer_exchange(op_count)\n    \n    add_elution_and_centrifuge(op_count,op_in_protein)\n    \n    take_and_label_eppendorf(op_count,op_out_protein)\n    \n    # Transfer the 1mL sample to the labeled Eppendorf.\n    transfer_sample_to_eppendorf(op_count,op_in_protein,op_out_protein)\n        \n    pro_concentration = measure_concentration(op_out_protein)\n        \n    # Record the protein concentration.\n    i = 0\n    operations.running.each do |op|\n        protein_out = op.output(\"Protein\").item\n        protein_out.associate :protein_concentration, pro_concentration[i]\n        i = i + 1\n    end\n    \n    operations.store(io: \"output\", interactive: true, method: 'boxes')\n    \n    clean_up\n    \n    get_protocol_feedback\n    \n    return {}\n  end\n  \n  def set_refrig_centrifuge_temp\n    show do\n        title \"Pre-cool a centrifuge\"\n        bullet \"Set the centrifuge to 4°C.\"\n        image \"Actions/ProteinPurification/centrifuge.jpg\"\n    end\n  end\n\n  def take_and_label_concentrator(op_count,op_in_protein_leng,op_in_protein_tube)\n    #added 3/26\n    op_table = [[\"Label\",\"Protein (kDa)\",\"Tubes\"]]\n    for i in 0..(op_count-1)\n        row = []\n        row \u003c\u003c {content:i+1, check: true}\n        row \u003c\u003c op_in_protein_leng[i]\n        row \u003c\u003c \"#{op_in_protein_tube[i]} Tube\"\n        op_table \u003c\u003c row\n    end\n    show do\n        title \"Label Centriprep tubes\"\n        check \"Grab Centriprep tube(s) (white or green membrane) as follows in the table.\"\n        check \"Label Centriprep tube(s) from 1 to #{op_count} on the tube wall and cap.\"\n        table op_table\n        image \"Actions/ProteinPurification/centriprep_tube.jpg\"\n    end\n  end\n    \n  def add_sample_to_tube(op_count,op_in_protein)\n    op_table = [[\"Sample ID\",\"Centriprep tube ID\"]]\n    for i in 0..(op_count-1)\n        row = []\n        row \u003c\u003c {content:op_in_protein[i], check: true}\n        row \u003c\u003c i+1\n        op_table \u003c\u003c row\n    end\n    \n    show do\n        title \"Load protein samples\"\n        check \"Remove caps from Centriprep tubes.\"\n        check \"Pour sample into sample container according to the table (as shown in the picture).\"\n        table op_table\n        check \"Screw caps back on tubes.\"\n        image \"Actions/ProteinPurification/pour_sample_to_concentrator.jpg\"\n    end\n  end\n    \n  def add_elution_and_centrifuge(op_count,op_in_protein)\n    show do\n        title \"Concentrate protein samples\"\n        bullet \"Perform steps with tubes: ID from 1 to #{op_count}.\"\n        check \"Spin at 3000g for 1 hour. Make sure to balance tubes.\"\n        check \"Remove Centriprep tubes from the centrifuge.\"\n        check \"Discard flow through in the filtrate collector (as shown in the picture).\"\n        warning \"Protein sample is concentrated in the \u003cb\u003esample container\u003c/b\u003e. Be careful not to empty a wrong container.\"\n        check \"Reassemble Centriprep tubes.\"\n        image \"Actions/ProteinPurification/collect_sample.jpg\"\n    end\n  end\n\n  def buffer_exchange(op_count)\n    op_table = [[\"Centriprep tube ID\",\"1xPBS\",\"50% Glycerol\"]]\n    for i in 0..(op_count-1)\n        row = []\n        row \u003c\u003c i+1\n        row \u003c\u003c {content:\"500 µl\", check: true}\n        row \u003c\u003c {content:\"500 µl\", check: true}\n        op_table \u003c\u003c row\n    end\n\n    show do\n        title \"Buffer exchange\"\n        bullet \"Perform steps with tubes: ID from 1 to #{op_count}.\"\n        check \"Grab PBS (pH7.4) \"\n        check \"Add 5 mL PBS into each sample container by using a serological pipette.\"\n        check \"Reassemble Centriprep tubes.\"\n        #table op_table\n        image \"Actions/ProteinPurification/add_pbs_buffer_exchange.jpg\"\n    end\n  end\n  \n  def take_and_label_eppendorf(op_count,op_out_protein)\n    show do\n        title \"Grab and label tubes\"\n        check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 1.5 mL tubes.\"\n        check \"Label tubes with ID: #{op_out_protein.to_sentence}.\"\n    end\n  end\n  \n def transfer_sample_to_eppendorf(op_count,op_in_protein,op_out_protein)\n    op_table = [[\"Centriprep tube ID\",\"1.5 mL tube ID\"]]\n    for i in 0..(op_count-1)\n        row = []\n        row \u003c\u003c i+1\n        row \u003c\u003c {content:op_out_protein[i], check: true}\n        op_table \u003c\u003c row\n    end\n    \n    show do\n        title \"Collect Samples\"\n        check \"Set a P1000 pipettor to 1000 µl.\"\n        check \"Check on sample volume :\"\n        bullet \"If sample volume is equal or less than 1000 µl, transfer sample to corresponding 1.5 mL tube according to the table. Then keep sample in ice bath.\"\n        bullet \"If sample volume is more than 1000 µl, don't withdraw the sample. Spin the Centriperp tube at 3000g for another 15 \n        minutes or until sample volume reaches 1000 µl.\"\n        table op_table\n        image \"Actions/ProteinPurification/check_on_volume.jpg\"\n    end\n  end\n  \n  def measure_concentration(op_out_protein)\n    protein_concentration = []\n    \n    op_out_protein.each do |id|\n        concetration = show do\n            title \"Measure protein concentration\"\n            check \"Open Nanodrop in protein mode. Blank with 2 µl PBS.\"\n            check \"Nanodrop 2 µl protein sample.\"\n            check \"Enter protein concentration.\"\n            get \"number\", var: \"x\", label: \"Protein concetration of #{id}\", default: 0\n        end\n        protein_concentration \u003c\u003c concetration[:x]\n    end\n    return protein_concentration\n  end\n  \n  def clean_up\n    show do\n        title \"Clean up\"\n        check \"Reset the centrifuge to 23°C.\"\n        check \"Discard used Centriprep tubes.\"\n        check \"Return the ice bucket/ice block.\"\n    end\n  end\nend\n","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 1.2 }\nend","documentation":"The objective of this protocol is to lower the imidazole concentration in the protein storage buffer and concentrate protein sample to a higher concentration which both help with increasing protein stability. \n\n- Workflow:\n  - His-tagged Purification \u003e *concentrate protein* \u003e SDS-PAGE Sample Preparation\n- Steps:\n  - [01] Grab a Centriprep tube and equilibrate the filter with water.\n  - [02] Spin for 10 minutes and pour off water\n  - [03] Pour the protein elution to the Centriprep tube.\n  - [04] centrifuge and collect concentrated protein sample.\n  - [05] Measure and record protein concentration.\n  - [06] Add glycerol to protein sample for preventing sample from being frozen in -20°C.","test":"","timing":null}},{"sample_types":[{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker","ftype":"string","choices":"Amp,Kan,Amp + Kan,Spec,Kan + Spec,Chlor,Tet,NA,Other","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-12-27T11:26:31.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS,TRP,URA,LEU,NatMX,KanMX,HygMX,BleoMX,5FOA,NA,Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-02-13T10:49:58.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":27,"field_type_id":7,"sample_type_id":1,"object_type_id":null,"created_at":"2017-02-13T10:49:58.000-08:00","updated_at":"2017-02-13T10:49:58.000-08:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":46,"parent_id":2,"name":"QC Primer1","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":29,"field_type_id":46,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":47,"parent_id":2,"name":"QC Primer2","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":30,"field_type_id":47,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":48,"parent_id":2,"name":"QC_length","ftype":"number","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5816,"parent_id":2,"name":"Transformation Temperature","ftype":"number","choices":"37,30","array":false,"required":false,"created_at":"2018-09-17T15:02:22.000-07:00","updated_at":"2018-11-06T11:31:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":458,"name":"TB Overnight (400 mL) of Plasmid","description":"A large overnight of E. coli transformed with a plasmid in TB + antibiotic","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2015-03-05T13:11:30.000-08:00","updated_at":"2015-03-05T16:27:13.000-08:00","unit":"Plasmid","cost":0.01,"release_method":"query","release_description":"","sample_type_id":2,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Plasmid"},{"id":819,"name":"Overexpression of Plasmid","description":"E. coli transformed with a plasmid in TB + antibiotic and induced by IPTG","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T20:57:28.000-07:00","updated_at":"2019-03-17T19:12:46.000-07:00","unit":"Plasmid","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":2,"image":"","prefix":"M20","rows":null,"columns":null,"sample_type_name":"Plasmid"},{"id":812,"name":"Cell Pellet of protein","description":"Cell pellet collected by a centrifuge","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:44:00.000-07:00","updated_at":"2019-03-13T17:21:33.000-07:00","unit":"Protein","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":82,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Protein"}],"operation_type":{"name":"Harvest Cell","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Overexpression","sample_types":["Plasmid"],"object_types":["TB Overnight (400 mL) of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"After IPTG","sample_types":["Plasmid"],"object_types":["Overexpression of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Cell pellet","sample_types":["Plasmid"],"object_types":["Cell Pellet of protein"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\r\n\r\nneeds \"Standard Libs/Feedback\"\r\n\r\nclass Protocol\r\n  include Feedback\r\n  def main\r\n        \r\n    # Remove the overexpression culture from the shaker.\r\n    operations.retrieve.make\r\n        \r\n    op_in_overexpression = []\r\n    op_out_cell_pellet = []\r\n    op_out_after = []\r\n    op_count = 0\r\n    operations.running.each do |op|\r\n        op_count = op_count + 1\r\n        op_in_overexpression \u003c\u003c op.input(\"Overexpression\").item.id\r\n        op_out_cell_pellet \u003c\u003c op.output(\"Cell pellet\").item.id\r\n        op_out_after \u003c\u003c op.output(\"After IPTG\").item.id\r\n    end\r\n\r\n    # Reserve 1ml cell culture after IPTG induction in Eppendorf with design ID \r\n    reserve_culture_after_iptg(op_count,op_in_overexpression,op_out_after,op_out_cell_pellet)\r\n    \r\n    take_tubes_and_label(op_count,op_in_overexpression,op_out_cell_pellet)\r\n    \r\n    spin_down_cell(op_count,op_out_after,op_in_overexpression,op_out_cell_pellet)\r\n\r\n    # Measure OD600 value cell culture after IPTG induction by nanodrop (Prof. James Carother’s lab).\r\n    od_value_after = measure_od_value op_out_after\r\n        \r\n    # Record the OD value.\r\n    i = 0\r\n    operations.running.each do |op|\r\n        sample_after = op.output(\"After IPTG\").item\r\n        sample_after.associate :od_value, od_value_after[i]\r\n        i = i + 1\r\n    end\r\n    \r\n    spin_down_pellet(op_out_after)\r\n    \r\n    spin_down_remaining_cell(op_count,op_out_after,op_in_overexpression,op_out_cell_pellet)\r\n    \r\n      operations.running.each do |op|\r\n      op.output(\"Cell pellet\").child_item.move \"-80°C freezer\"\r\n    end\r\n    \r\n    operations.store(io: \"output\", interactive: true, method: 'boxes')\r\n    \r\n    clean_up\r\n    \r\n    get_protocol_feedback\r\n\r\n    return {}\r\n  end\r\n\r\n\r\n  def measure_od_value(meas_sample)\r\n    od_value = []\r\n    show do\r\n        title \"Measure OD600 value of cell culture in MolES lab\"\r\n        check \"Grab a box to carry the following items:\"\r\n        bullet \"a box of 1000 µl tip\"\r\n        bullet \"a P1000 pipettor\" \r\n        bullet \"a tip waste container\" \r\n        bullet \"#{meas_sample.size+1} plastic cuvettes\"\r\n        bullet \"1 mL of TB aliquot\"\r\n        bullet \"a marker pen\"\r\n        bullet \"sample in a 1.5 mL tube: #{meas_sample.to_sentence}\"\r\n    end\r\n    \r\n    show do\r\n        title \"Measure OD600 value of cell culture in MolES lab\"\r\n        note \"Perform the following steps with #{meas_sample.to_sentence}.\"\r\n        bullet \"Open Nanodrop 2000 \u003cb\u003e\u003e\u003c/b\u003e Home \u003cb\u003e\u003e\u003c/b\u003e cell culture \u003cb\u003e\u003e\u003c/b\u003e use cuvette \u003cb\u003e\u003e\u003c/b\u003e pathlength: 10mm \u003cb\u003e\u003e\u003c/b\u003e stir speed: off\"\r\n        bullet \"Blank with 1 mL TB in a cuvette.\"\r\n        bullet \"Discard TB to the liquid waste container.\"\r\n        bullet \"Transfer 1 mL of sample to a new cuvette.\"\r\n        bullet \"Measure OD600 value and record it on the 1.5 mL tube wall.\"\r\n        bullet \"Transfer sample from the cuvette back to its 1.5 mL tube.\"\r\n        warning \"In this step, be careful not to pour samples into the liquid waste container.\"\r\n        image \"Actions/ProteinPurification/cuvette_nanodrop.jpg\"\r\n    end\r\n    \r\n  def spin_down_pellet(op_out_after)\r\n    show do\r\n        title \"Spin down cell\"\r\n        note \"Perform the steps with 1.5 mL sample tubes: #{op_out_after.to_sentence}.\"\r\n        check \"Spin down at 8000 g for 3 minutes.\"\r\n        check \"Remove tubes from the centrifuge. Pipette out the supernatant and keep pellet.\"\r\n        check \"Place 1.5 mL sample tubes aside for later processing.\"\r\n    end\r\n  end\r\n    \r\n    meas_sample.each do |id|\r\n      od = show do\r\n        title \"Enter OD value\"\r\n        get \"number\", var: \"x\", label: \"Enter OD600 value of #{id}\", default: 0\r\n      end\r\n      od_value \u003c\u003c od[:x]\r\n    end\r\n    return od_value\r\n  end\r\n\r\n  def reserve_culture_after_iptg(op_count,op_in_overexpression,op_out_after,op_out_cell_pellet)\r\n    op_table = [[\"Cell culture ID\",\"Volume\",\"1.5 mL tube ID\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_in_overexpression[i]\r\n        row \u003c\u003c \"1 mL\"\r\n        row \u003c\u003c {content:op_out_after[i], check: true}\r\n        op_table \u003c\u003c row\r\n    end\r\n    \r\n    show do\r\n        title \"Pre-cool a centrifuge\"\r\n        check \"Set the centrifuge to 4°C.\"\r\n        image \"Actions/ProteinPurification/centrifuge.jpg\"\r\n    end\r\n    \r\n    show do\r\n        title \"Reserve 1 mL of cell culture before harvesting cell\"\r\n        # after IPTG induction\r\n        check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 1.5 mL tube(s).\"\r\n        check \"Label the tube with ID: #{op_out_after.to_sentence}.\"\r\n        check \"Spray a P1000 pipettor with ethanol and wipe it dry.\"\r\n        check \"Swirl the bottle and transfer 1 mL of cell culture to the corresponding 1.5mL tube.\"\r\n        note \"**Use a new tip for each batch to avoid cross contamination.**\"\r\n        check \"Place the 1.5 mL sample tubes aside for later task.\"\r\n        table op_table\r\n    end\r\n  end\r\n  \r\n  def take_tubes_and_label(op_count,op_in_overexpression,op_out_cell_pellet)\r\n    op_table = [[\"Cell culture ID\",\"Volume\",\"225 mL Falcon tube ID\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_in_overexpression[i]\r\n        row \u003c\u003c \"220 mL\"\r\n        row \u003c\u003c {content:op_out_cell_pellet[i], check: true}\r\n        op_table \u003c\u003c row\r\n    end\r\n    \r\n    show do\r\n        title \"Prepare tubes\"\r\n        check \"Grab a ice bucket and fill it with ice.\"\r\n        check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 225 mL Falcon tube(s) and label with ID: #{op_out_cell_pellet.to_sentence} on the tube wall.\"\r\n        check \"Place tubes in ice bath.\"\r\n        image \"Actions/ProteinPurification/225_falcon_tube.jpg\"\r\n    end\r\n    \r\n    show do \r\n      title \"Harvest cell\"\r\n      check \"Pour approximately 220 mL of cell culture into the corresponding tube and screw the cap.\"\r\n      table op_table\r\n    end\r\n  end\r\n  \r\n  def spin_down_cell(op_count,op_out_after,op_in_overexpression,op_out_cell_pellet)\r\n      \r\n    run = (op_count/4).floor\r\n    remainder = op_count % 4\r\n    if (remainder) != 0\r\n        run = run + 1\r\n    end\r\n    \r\n    for i in 1..run\r\n        if (i*4 \u003e op_count)\r\n            leng = remainder\r\n        else\r\n            leng = 4\r\n        end\r\n        tube_id = op_out_after[(i-1)*4,leng]\r\n        \r\n        show do\r\n            title \"Spin down the cell\"\r\n            note \"Perform the steps with the following tubes: #{op_out_cell_pellet.to_sentence}.\"\r\n            check \"Balance samples in tubes.\"\r\n            check \"Spin tubes at 4696g for 20 minutes.\"\r\n            check \"While waiting, proceed to measure OD value of reserved 1.5 mL tubes on the rack.\"\r\n        end\r\n    end\r\n  end\r\n  \r\n  def spin_down_remaining_cell(op_count,op_out_after,op_in_overexpression,op_out_cell_pellet)\r\n    op_table = [[\"Cell culture ID\",\"225 mL Falcon tube ID\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_in_overexpression[i]\r\n        row \u003c\u003c {content:op_out_cell_pellet[i], check: true}\r\n        op_table \u003c\u003c row\r\n    end\r\n    \r\n    run = (op_count/4).floor\r\n    remainder = op_count % 4\r\n    if (remainder) != 0\r\n        run = run + 1\r\n    end\r\n    \r\n    for i in 1..run\r\n        if (i*4 \u003e op_count)\r\n            leng = remainder\r\n        else\r\n            leng = 4\r\n        end\r\n        tube_id = op_out_after[(i-1)*4,leng]\r\n        \r\n        show do \r\n            title \"Continue to harvesting the remaining cell in 2L flask\"\r\n            note \"Perform the steps with the tubes: #{op_out_cell_pellet.to_sentence}.\"\r\n            check \"Remove tubes from 4°C centrifuge after the first 20-min spin is done.\"\r\n            check \"Pour supernatant into a liquid waste container or sink. Keep pellet.\"\r\n            check \"Pour approximately 220 mL of cell culture into a tube according to the table.\"\r\n            table op_table\r\n            check \"Balance samples in tubes.\"\r\n            check \"Spin tubes at 4696g for 20 minutes.\" \r\n        end\r\n        \r\n        show do\r\n            title \"Retrieve tubes\"\r\n            check \"Remove tubes from centrifuge after the 20-min spin is done.\"\r\n            check \"Reset the centrifuge to 23°C.\"\r\n            check \"Pour supernatant into a the used 2L flask or sink. Keep pellet.\"\r\n            check \"Store #{op_out_cell_pellet.to_sentence} in -80°C freezer.\"\r\n        end\r\n    end\r\n  end\r\n    \r\n  def clean_up\r\n    show do\r\n        title \"Clean up\"\r\n        check \"Place used 2L flask in the dishwashing area.\"\r\n        check \"Return ice bucket.\"\r\n        check \"Clean plastic cuvettes by rinsing with water twice.\"\r\n        check \"Rinse cuvettes with 70% ethanol.\"\r\n        check \"Return them back to the storage box.\"\r\n    end\r\n  end\r\n\r\nend\r\n","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to collect cell pellet by a centrifuge.\n\n- Workflow:\n  - IPTG induction \u003e *Harvest Cell* \u003e Column Packing \n- Steps:\n  - [01] Retrieve the cell culture from 37°C shaker.\n  - [02] Reserve 1 mL of cell culture in a 1.5 mL tube.\n  - [03] Pour 200 mL cell culture into a 225 mL Falcon tube.\n  - [04] Spin down the cell at 4696g for 15 minutes.\n  - [05] Remove the tube from the centrifuge and discard supernatant.  \n  - [06] Pour all the remaining cell culture to the tube and spin down the cell at 4696g for another 15 minutes.\n  - [07] Pour off supernatant and keep the cell pellet at -80°C freezer.","test":"","timing":null}},{"sample_types":[{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker","ftype":"string","choices":"Amp,Kan,Amp + Kan,Spec,Kan + Spec,Chlor,Tet,NA,Other","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-12-27T11:26:31.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS,TRP,URA,LEU,NatMX,KanMX,HygMX,BleoMX,5FOA,NA,Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-02-13T10:49:58.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":27,"field_type_id":7,"sample_type_id":1,"object_type_id":null,"created_at":"2017-02-13T10:49:58.000-08:00","updated_at":"2017-02-13T10:49:58.000-08:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":46,"parent_id":2,"name":"QC Primer1","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":29,"field_type_id":46,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":47,"parent_id":2,"name":"QC Primer2","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":30,"field_type_id":47,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":48,"parent_id":2,"name":"QC_length","ftype":"number","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5816,"parent_id":2,"name":"Transformation Temperature","ftype":"number","choices":"37,30","array":false,"required":false,"created_at":"2018-09-17T15:02:22.000-07:00","updated_at":"2018-11-06T11:31:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":82,"name":"Protein","description":"Protein","created_at":"2018-10-09T11:41:26.000-07:00","updated_at":"2018-10-09T11:41:26.000-07:00","field_types":[{"id":6524,"parent_id":82,"name":"Size","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2018-10-30T20:47:00.000-07:00","updated_at":"2018-10-30T20:47:00.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7070,"parent_id":82,"name":"Wash_Buffer","ftype":"number","choices":"5,10,15,30,0","array":false,"required":true,"created_at":"2018-11-30T14:46:57.000-08:00","updated_at":"2018-11-30T14:46:57.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":81,"name":"Resin","description":"Resin","created_at":"2018-10-02T14:15:06.000-07:00","updated_at":"2018-10-02T14:17:30.000-07:00","field_types":[]}],"object_types":[{"id":813,"name":"Cell Lysate of Protein Expression","description":"Lysed and sonicated cell lysate in lysis buffer","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:51:36.000-07:00","updated_at":"2018-11-27T19:05:21.000-08:00","unit":"Protein","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":82,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Protein"},{"id":816,"name":"Protein Elution","description":"Protein eluted by imidazole","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:57:58.000-07:00","updated_at":"2018-11-27T19:09:54.000-08:00","unit":"Protein","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":82,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Protein"},{"id":828,"name":"Column","description":"packed column with resin for protein purification","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2019-01-08T13:23:03.000-08:00","updated_at":"2019-01-08T13:23:03.000-08:00","unit":"column","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":81,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Resin"}],"operation_type":{"name":"His-tagged Purification","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Cell Lysate","sample_types":["Plasmid"],"object_types":["Cell Lysate of Protein Expression"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Protein","sample_types":["Protein"],"object_types":["Protein Elution"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"input","name":"Resin","sample_types":["Resin"],"object_types":["Column"],"part":false,"array":false,"routing":"R","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\r\n\r\nneeds \"Standard Libs/Feedback\"\r\n\r\nclass Protocol\r\n  include Feedback\r\n  def main\r\n\r\n    operations.retrieve.make\r\n\r\n    op_in_cell_lysate = []\r\n    op_in_resin = []\r\n    op_out_protein = []\r\n    op_wash_amount = []\r\n    op_count = 0\r\n    operations.running.each do |op|\r\n        op_count = op_count + 1\r\n        op_in_cell_lysate \u003c\u003c op.input(\"Cell Lysate\").item.id\r\n        op_in_resin \u003c\u003c op.input(\"Resin\").item.id\r\n        op_out_protein \u003c\u003c op.output(\"Protein\").item.id\r\n        op_wash_amount \u003c\u003c op.output(\"Protein\").sample.properties[\"Wash_Buffer\"].to_f\r\n    end\r\n    \r\n    # Turn on the stopcock and let the binding buffer flow through of the column.\r\n    turn_on_stopcock_binding(op_count,op_in_resin,op_in_cell_lysate)\r\n        \r\n    # Apply the supernatant with design ID into the gravity flow column with resin in it.\r\n    apply_supernatnat(op_count,op_in_cell_lysate,op_in_resin)\r\n    \r\n    reload_sample(op_count,op_in_resin,op_out_protein,op_in_cell_lysate)\r\n    \r\n    apply_supernatnat(op_count,op_in_cell_lysate,op_in_resin)\r\n    \r\n    #turn_on_stopcock_supernatant(op_count,op_in_cell_lysate,op_in_resin)\r\n    buffer_preparation(op_count,op_in_cell_lysate,op_wash_amount,op_out_protein)\r\n    \r\n    # Add 50mL wash buffer to the column and let it flow through the column completely. Then turn off the stopcock.\r\n    add_wash_buff(op_count,op_in_resin,op_out_protein,op_in_cell_lysate)\r\n    \r\n    prepare_elution_buffer(op_count,op_out_protein,op_in_cell_lysate)\r\n        \r\n    # Add 7.5mL elution buffer into the column.\r\n    add_elution_buff(op_count,op_in_resin,op_out_protein)\r\n        \r\n    operations.running.each do |op|\r\n      op.output(\"Protein\").child_item.move \"4°C or on ice for the (next) protocol\"\r\n    end\r\n\r\n    operations.store(io: \"output\", interactive: true)\r\n    \r\n    clean_up\r\n    \r\n    get_protocol_feedback\r\n\r\n    return {}\r\n\r\n  end\r\n  \r\n  # approximate final concentration of imidazole: 5-30mM wash buffer/250mM elution buffer\r\n  def buffer_preparation(op_count,op_in_cell_lysate,op_wash_amount, op_out_protein)\r\n    op_table =[[\"Falcon tube ID\",\"Purification buffer volume\",\"Imidazole volume\"]]\r\n    \r\n    for i in 0..(op_count-1)\r\n        #if !op_wash_amount[i]\r\n            #op_wash_amount[i] = 5\r\n        #end\r\n        row = []\r\n        row \u003c\u003c op_in_cell_lysate[i]\r\n        row \u003c\u003c {content: \"15 mL\", check: true}\r\n        row \u003c\u003c {content: \"#{op_wash_amount[i]*3} µl\", check: true}\r\n        op_table \u003c\u003c row\r\n    end\r\n    \r\n    show do\r\n        title \"Prepare wash buffer\"\r\n        check \"Grab Purification Buffer from 4°C refrigerator.\"\r\n        check \"Grab a imidazole aliquot, in a box labeled \u003cb\u003eprotein purification\u003c/b\u003e in -20°C freezer (B1-165)\"\r\n        #check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 50 mL Falcon tube and label with #{op_in_cell_lysate.to_sentence} on the tube wall.\"\r\n        check \"Prepare wash buffer according to the table.\"\r\n        check \"Mix the buffer by quick vortexing.\"\r\n        table op_table\r\n    end\r\n  end\r\n\r\n  def turn_on_stopcock_binding(op_count,op_in_resin,op_in_cell_lysate)\r\n    show do\r\n        title \"Remove liquid from the column\"\r\n        check \"Open the column outlet. Allow buffer to flow out of the column.\"\r\n        check \"Leave 0.5-1 mL buffer in the column to prevent resin dry out, then close the column outlet.\"\r\n        check \"Discard flow through in the tube. Return the tube underneath the corresponding column\"\r\n        check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e disposable dropper(s).\"\r\n        check \"Label droppers with ID: #{op_in_cell_lysate.to_sentence}\"\r\n        check \"Place dropper in its corresponding sample tube (as shown in the picture). Place caps aside for later use.\"\r\n        image \"Actions/ProteinPurification/droppers.jpg\"\r\n    end\r\n  end\r\n    \r\n  def apply_supernatnat(op_count,op_in_cell_lysate,op_in_resin)\r\n    op_table = [[\"Sample ID\",\"Column ID\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_in_cell_lysate[i]\r\n        row \u003c\u003c op_in_resin[i]\r\n        op_table \u003c\u003c row\r\n    end\r\n    show do\r\n       title \"Load sample to a column\"\r\n       check \"Load sample to its corresponding column by using a plastic dropper.\"\r\n       note \"**Be careful not to disturb the resin. Use a new dropper for each sample to avoid cross contamination.**\"\r\n       table op_table\r\n       check \"Partially open the column oulet and make sample slowly flow out of the column (as show in the picture).\"\r\n       check \"Continue loading sample to its corresponding column until all of the sample has applied to the column.\"\r\n       check \"Leave 0.5-1 mL sample in the column to prevent resin dry out, then close the column outlet.\"\r\n       image \"Actions/ProteinPurification/outlet_angle.jpg\"\r\n    end\r\n  end\r\n  \r\n  def reload_sample(op_count,op_in_resin,op_out_protein,op_in_cell_lysate)\r\n    op_table = [[\"Elution tube ID\",\"Sample tube ID\"]]\r\n    for i in 0..(op_count-1)\r\n        row = [] \r\n        row \u003c\u003c op_in_resin[i]\r\n        row \u003c\u003c op_in_cell_lysate[i]\r\n        op_table \u003c\u003c row\r\n    end\r\n    show do\r\n        title \"Transfer elution to its sample tube\"\r\n        check \"Pour all the elution back to its sample tube according to the table.\" \r\n        table op_table\r\n        check \"Return the empty elution tube underneath its corresponding column for collecting sample.\"\r\n    end\r\n  end\r\n  \r\n  \r\n  def add_wash_buff(op_count,op_in_resin,op_out_protein,op_in_cell_lysate)\r\n    op_table = [[\"Wash buffer tube ID\",\"Column ID\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_in_cell_lysate[i]\r\n        row \u003c\u003c op_in_resin[i]\r\n        op_table \u003c\u003c row\r\n    end\r\n    show do\r\n       title \"Column wash\"\r\n       check \"Discard flow through in the tube. Return the tube back underneath the corresponding column.\"\r\n       check \"According to the table, load all of the wash buffer to each column by using a dropper.\"\r\n       table op_table\r\n       check \"Fully open the column outlet. Allow buffer to flow out of the column.\"\r\n       check \"Leave 0.5-1 mL buffer in the column to prevent resin dry out, then close the column outlet.\"\r\n       check \"Remove the tubes underneath each column. Discard flow through, all falcon tubes, and droppers.\"\r\n    end\r\n  end\r\n  \r\n  def prepare_elution_buffer(op_count,op_out_protein,op_in_cell_lysate)\r\n    op_table = [[\"Falcon tube ID\",\"Purification buffer volume\",\"Imidazole volume\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_out_protein[i]\r\n        row \u003c\u003c {content:\"7.5 mL\", check: true}\r\n        row \u003c\u003c {content:\"400 µl\", check: true}\r\n        op_table \u003c\u003c row\r\n    end\r\n        \r\n    show do\r\n        title \"Prepare elution buffer\"\r\n        check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e Falcon tube(s).\"\r\n        check \"Label tube(s) with ID: #{op_out_protein.to_sentence} on the tube wall and cap.\"\r\n        check \"Prepare elution buffer according to the table.\"\r\n        check \"Mix the buffer by quick vortexing.\"\r\n        table op_table\r\n    end\r\n  end\r\n  \r\n  def add_elution_buff(op_count,op_in_resin,op_out_protein)\r\n    op_table_1 = [[\"Elution buffer tube ID\",\"Column ID\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_out_protein[i]\r\n        row \u003c\u003c op_in_resin[i]\r\n        op_table_1 \u003c\u003c row\r\n    end\r\n        \r\n    show do\r\n       title \"Elute protein sample\"\r\n       check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e droppers.\"\r\n       check \"Load elution buffer to its corresponding column according to the table, and then return the empty tube underneath the column for collecting sample.\"\r\n       table op_table_1\r\n       check \"Fully open the column oulet and make sample slowly flow out of the column.\"\r\n       check \"Close the column outlet.\"\r\n       check \"Screw the cap back onto the tube. Keep sample in ice bath.\"\r\n    end\r\n  end\r\n  \r\n  def clean_up\r\n    show do\r\n        title \"Clean up\"\r\n        check \"Return the purification buffer to 4°C refrigerator.\"\r\n        check \"Return imidazole aliquot to -20°C freezer.\"\r\n        check \"Detach adaptors from columns.\"\r\n        check \"Clean up adaptors by rinsing with water.\"\r\n        check \"Discard used columns and Falcon tubes.\"\r\n        check \"Discard used droppers.\"\r\n        check \"Disassemble the support stand and return it to the drawer.\"\r\n    end\r\n  end\r\n  \r\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to capture a target protein by using its binding capacity to Ni-NTA resin.\n\n- Workflow:\n  - Lyse cell \u003e *His-tagged Purification* \u003e Concentrate Protein \n- Steps:\n  - [01] Prepare wash buffer and elution buffer.\n  - [02] Remove cell particles from the sample by loading sample to an empty column and passing through an 30 µm filter in the column.\n  - [03] Apply sample to the packed column.\n  - [04] Wash the column by wash buffer.\n  - [05] Elute protein sample by elution buffer.","test":"","timing":null}},{"sample_types":[{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker","ftype":"string","choices":"Amp,Kan,Amp + Kan,Spec,Kan + Spec,Chlor,Tet,NA,Other","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-12-27T11:26:31.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS,TRP,URA,LEU,NatMX,KanMX,HygMX,BleoMX,5FOA,NA,Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-02-13T10:49:58.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":27,"field_type_id":7,"sample_type_id":1,"object_type_id":null,"created_at":"2017-02-13T10:49:58.000-08:00","updated_at":"2017-02-13T10:49:58.000-08:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":46,"parent_id":2,"name":"QC Primer1","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":29,"field_type_id":46,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":47,"parent_id":2,"name":"QC Primer2","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":30,"field_type_id":47,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":48,"parent_id":2,"name":"QC_length","ftype":"number","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5816,"parent_id":2,"name":"Transformation Temperature","ftype":"number","choices":"37,30","array":false,"required":false,"created_at":"2018-09-17T15:02:22.000-07:00","updated_at":"2018-11-06T11:31:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":366,"name":"TB Overnight of Plasmid","description":"An overnight of E. coli transformed with a plasmid in TB + antibiotic","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2014-02-25T17:07:26.000-08:00","updated_at":"2015-03-02T10:21:13.000-08:00","unit":"Plasmid","cost":0.01,"release_method":"return","release_description":"","sample_type_id":2,"image":"","prefix":"DFO","rows":null,"columns":null,"sample_type_name":"Plasmid"},{"id":458,"name":"TB Overnight (400 mL) of Plasmid","description":"A large overnight of E. coli transformed with a plasmid in TB + antibiotic","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2015-03-05T13:11:30.000-08:00","updated_at":"2015-03-05T16:27:13.000-08:00","unit":"Plasmid","cost":0.01,"release_method":"query","release_description":"","sample_type_id":2,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Plasmid"},{"id":819,"name":"Overexpression of Plasmid","description":"E. coli transformed with a plasmid in TB + antibiotic and induced by IPTG","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T20:57:28.000-07:00","updated_at":"2019-03-17T19:12:46.000-07:00","unit":"Plasmid","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":2,"image":"","prefix":"M20","rows":null,"columns":null,"sample_type_name":"Plasmid"}],"operation_type":{"name":"IPTG Induction","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Overexpression","sample_types":["Plasmid"],"object_types":["TB Overnight of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Overexpression","sample_types":["Plasmid"],"object_types":["TB Overnight (400 mL) of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Before IPTG","sample_types":["Plasmid"],"object_types":["Overexpression of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\r\n\r\nneeds \"Standard Libs/Feedback\"\r\n\r\nclass Protocol\r\n  include Feedback\r\n  def main\r\n        \r\n    # Remove the overexpression culture from the shaker.\r\n    operations.retrieve.make\r\n        \r\n    op_in_overexpression = []\r\n    op_out_overexpression = []\r\n    op_out_before = []\r\n    op_count = 0\r\n    operations.running.each do |op|\r\n        op_count = op_count + 1\r\n        op_in_overexpression \u003c\u003c op.input(\"Overexpression\").item.id\r\n        op_out_overexpression \u003c\u003c op.output(\"Overexpression\").item.id\r\n        op_out_before \u003c\u003c op.output(\"Before IPTG\").item.id\r\n    end\r\n    \r\n    # Reserve 1ml cell culture before IPTG induction in Eppendorf with design ID\r\n    reserve_culture_before_iptg(op_count,op_in_overexpression,op_out_before)\r\n    \r\n    # Add isopropyl-1-thio-beta-D-galactopyranoside (IPTG) into the culture.\r\n    add_iptg(op_count,op_in_overexpression)\r\n    \r\n    \r\n    relabel_overexpression(op_count,op_in_overexpression,op_out_overexpression)\r\n        \r\n    # Keep the culture in 30 °C shaker for 5 hours.\r\n    culture_in_shaker_for_4hrs\r\n    \r\n    spin_down_pellet(op_out_before)\r\n\r\n    operations.running.each do |op|\r\n        op.set_input_data(\"Overexpression\", :od_value, Random.rand(0.8..1.0)) if debug\r\n        \r\n        od_input = op.input_data(\"Overexpression\", :od_value).to_f\r\n        sample_before = op.output(\"Before IPTG\").item\r\n        sample_before.associate :od_value, od_input\r\n    end\r\n    \r\n    operations.running.each do |op|\r\n      op.output(\"Overexpression\").child_item.move \"30°C shaker incubator\"\r\n    end\r\n    \r\n    operations.store(io: \"output\", interactive: true, method: \"boxes\")\r\n    \r\n    get_protocol_feedback\r\n\r\n    return {}\r\n  end\r\n\r\n  def reserve_culture_before_iptg(op_count,op_in_overexpression,op_out_before)\r\n    op_table = [[\"Cell culture ID\",\"Volume\",\"1.5 mL tube ID\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_in_overexpression[i]\r\n        row \u003c\u003c \"1 mL\"\r\n        row \u003c\u003c {content:op_out_before[i], check: true}\r\n        op_table \u003c\u003c row\r\n    end\r\n    show do\r\n      title \"Reserve 1 mL of cell culture before performing IPTG induction\"\r\n      check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 1.5mL tube(s).\"\r\n      check \"Label tube(s) with ID: #{op_out_before.to_sentence}.\"\r\n      check \"Spray a P1000 pipettor with ethanol and wipe it dry.\"\r\n      check \"Swirl the bottle and transfer 1 mL of cell culture to the corresponding 1.5 mL tube.\"\r\n      note \"**The flask walls should not be touching the pipettor.**\"\r\n      check \"Place 1.5 mL sample tubes aside for later task.\"\r\n      table op_table\r\n    end\r\n  end\r\n  \r\n\r\n  def add_iptg(op_count,op_in_overexpression)\r\n    op_table = [[\"Cell culture ID\",\"IPTG Volume\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_in_overexpression[i]\r\n        row \u003c\u003c {content: \"1 aliquot\", check: true}\r\n        op_table \u003c\u003c row\r\n    end\r\n    show do \r\n      title \"IPTG induction\"\r\n      check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e IPTG aliquot(s) from a box labeled \u003cb\u003eprotein purification\u003c/b\u003e in -20°C freezer (B1-165).\"\r\n      check \"Defrost the aliquot(s) by hands or a vortex.\"\r\n      check \"Add one IPTG aliquot to each 2L flask: #{op_in_overexpression.to_sentence}.\" \r\n      table op_table\r\n    end\r\n  end\r\n  \r\n  def relabel_overexpression(op_count,op_in_overexpression,op_out_overexpression)\r\n    op_table = [[\"Old sample ID\",\"New Label\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c op_in_overexpression[i]\r\n        row \u003c\u003c {content:op_out_overexpression[i], check: true}\r\n        op_table \u003c\u003c row\r\n    end\r\n    show do\r\n        title \"Relabel 2L flasks with new ID\"\r\n        check \"Write new ID on a piece of lab tape and affix it on the old label (or cross old ID out and then label with new ID).\"\r\n        table op_table\r\n    end\r\n  end\r\n  \r\n  def culture_in_shaker_for_4hrs\r\n    show do \r\n      title \"Incubate\"\r\n      check \"Place the large cell culture at 30°C shaker incubator for 5 hours.\"\r\n      bullet \"\u003ca href=\\'https://www.google.com/search?q=5%20hour%20timer\\' target=\\'_blank\\'\u003eUse a 5 hour Google timer\u003c/a\u003e to set a reminder, at which point you will start the \u003cb\u003e\\'Harvest Cell\\'\u003c/b\u003e protocol.\"\r\n      check \"While the cell cultures incubate, finish this protocol by completing the remaining tasks.\"\r\n    end\r\n  end\r\n  \r\n  def spin_down_pellet(op_out_before)\r\n    show do\r\n        title \"Spin down cell\"\r\n        note \"Perform the steps with the following 1.5 mL tubes: #{op_out_before.to_sentence}.\"\r\n        check \"Spin down at 8000g for 3 minutes.\"\r\n        check \"Remove tubes from the centrifuge. Pipette out the supernatant and keep pellet.\"\r\n    end\r\n  end\r\n  \r\n  def measure_od_value(meas_sample)\r\n    od_value = []\r\n    show do\r\n        title \"Measure OD600 value of cell culture in MolES lab\"\r\n        check \"Grab a box to carry the following items:\"\r\n        bullet \"a box of 1000 µl tip\"\r\n        bullet \"a P1000 pipettor\" \r\n        bullet \"a tip waste container\" \r\n        bullet \"#{meas_sample.size+1} plastic cuvettes\"\r\n        bullet \"TB aliquot\"\r\n        bullet \"a marker pen\"\r\n        bullet \"sample in a 1.5 mL tube: #{meas_sample.to_sentence}\"\r\n    end\r\n    \r\n    show do\r\n        title \"Measure OD600 value of cell culture in MolES lab\"\r\n        bullet \"Open Nanodrop 2000 \u003cb\u003e\u003e\u003c/b\u003e Home \u003cb\u003e\u003e\u003c/b\u003e cell culture \u003cb\u003e\u003e\u003c/b\u003e use cuvette \u003cb\u003e\u003e\u003c/b\u003e pathlength: 10mm \u003cb\u003e\u003e\u003c/b\u003e stir speed: off\"\r\n        bullet \"Blank with 1 mL TB in a cuvette.\"\r\n        bullet \"Discard TB to the liquid waste container.\"\r\n        bullet \"Transfer 1 mL of #{meas_sample.to_sentence} to a new cuvette.\"\r\n        bullet \"Measure OD600 value and record it on the 1.5 mL tube wall.\"\r\n        bullet \"Transfer sample from the cuvette back to its 1.5 mL tube.\"\r\n        warning \"In this step, be careful not to pour samples into the liquid waste container. You will need to keep the samples for later task.\"\r\n        image \"Actions/ProteinPurification/cuvette_nanodrop.jpg\"\r\n    end\r\n    \r\n    meas_sample.each do |id|\r\n      od = show do\r\n        title \"Enter OD value\"\r\n        get \"number\", var: \"x\", label: \"Enter OD600 value of #{id}\", default: 0\r\n      end\r\n      od_value \u003c\u003c od[:x]\r\n    end\r\n    return od_value\r\n  end\r\n  \r\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to use IPTG to induce the expression of a protein of interest.\r\n\r\n- Workflow:\r\n  - Make Overexpression \u003e *IPTG Induction* \u003e Harvest Cell\r\n- Steps:\r\n  - [01] Retrieve the 450 mL cell culture from 37°C shaker.\r\n  - [02] Reserve 1 mL of cell culture to a 1.5 mL tube.\r\n  - [03] Add IPTG to the 450 mL cell culture and return it to 37°C shaker.\r\n  - [04] Incubate the cell culture for 4 hours.\r\n  - [05] While cells incubate, measure and record OD600 value of the 1 mL reserved cell culture.\r\n  - [06] Spin down cell and store the cell pellet at -20°C.","test":"","timing":null}},{"sample_types":[{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker","ftype":"string","choices":"Amp,Kan,Amp + Kan,Spec,Kan + Spec,Chlor,Tet,NA,Other","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-12-27T11:26:31.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS,TRP,URA,LEU,NatMX,KanMX,HygMX,BleoMX,5FOA,NA,Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-02-13T10:49:58.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":27,"field_type_id":7,"sample_type_id":1,"object_type_id":null,"created_at":"2017-02-13T10:49:58.000-08:00","updated_at":"2017-02-13T10:49:58.000-08:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":46,"parent_id":2,"name":"QC Primer1","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":29,"field_type_id":46,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":47,"parent_id":2,"name":"QC Primer2","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":30,"field_type_id":47,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":48,"parent_id":2,"name":"QC_length","ftype":"number","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5816,"parent_id":2,"name":"Transformation Temperature","ftype":"number","choices":"37,30","array":false,"required":false,"created_at":"2018-09-17T15:02:22.000-07:00","updated_at":"2018-11-06T11:31:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":812,"name":"Cell Pellet of protein","description":"Cell pellet collected by a centrifuge","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:44:00.000-07:00","updated_at":"2019-03-13T17:21:33.000-07:00","unit":"Protein","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":82,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Protein"},{"id":813,"name":"Cell Lysate of Protein Expression","description":"Lysed and sonicated cell lysate in lysis buffer","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:51:36.000-07:00","updated_at":"2018-11-27T19:05:21.000-08:00","unit":"Protein","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":82,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Protein"}],"operation_type":{"name":"Lyse Cell","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Cell Pellet","sample_types":["Plasmid"],"object_types":["Cell Pellet of protein"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Cell Lysate","sample_types":["Plasmid"],"object_types":["Cell Lysate of Protein Expression"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\n\nneeds \"Standard Libs/Feedback\"\n\nclass Protocol\n  include Feedback\n  def main\n    operations.retrieve.make\n    \n    op_in_cell_pellet = []\n    op_out_cell_lysate = []\n    op_count = 0\n    operations.running.each do |op|\n        op_count = op_count + 1\n        op_in_cell_pellet \u003c\u003c op.input(\"Cell Pellet\").item.id\n        op_out_cell_lysate \u003c\u003c op.output(\"Cell Lysate\").item.id\n    end\n    \n     # Take the cell paste from -80°C and let cells thaw on ice.\n    take_cell_pellet(op_in_cell_pellet)\n    \n    # Take and add 50mL lysis buffer into a 50mL Falcon tube and add one tablet of protease inhibitor.\n    take_lysis_buff(op_count,op_in_cell_pellet)\n        \n    # Shake the Falcon tube and mix the buffer well until the protease inhibitor tablet fully dissolved in the lysis buffer.\n    distribute_lysis_buff(op_count,op_in_cell_pellet)\n        \n    # Lyse the cell by a sonicator in Prof. Seelig’s Lab.\n    lyse_cell_by_sonicator(op_count,op_in_cell_pellet,op_out_cell_lysate)\n        \n    # Turn on the sonicator and set the time and temperature condition, 95% power output, 10secs on, 30secs off, repeat 30 rounds.\n    set_up_sonicator(op_count)\n    \n    add_binding_buffer(op_count)\n    \n    weigh_and_balance_tubes(op_count)\n         \n    # Spin by the tabletop high-speed centrifuge under 24,000g for 30mins at 4°C.\n    spin_hs_centrifuge(op_count)\n        \n    # Transfer the supernatant to new tubes and discard the cell pellet.\n    transfer_supernatant_to_new_tubes_label(op_count,op_in_cell_pellet,op_out_cell_lysate)\n    \n    operations.running.each do |op|\n      op.output(\"Cell Lysate\").child_item.move \"4°C or on ice for the (next) protocol\"\n    end\n    \n    operations.store(io: \"output\", interactive: true)\n    get_protocol_feedback\n\n    return {}\n\n  end\n  \n  def take_cell_pellet(op_in_cell_pellet)\n    show do\n       title \"Thaw cell pellets on ice\"\n       check \"Grab a ice bucket and fill it with ice.\"\n       check \"Keep #{op_in_cell_pellet.to_sentence} in ice bath.\"\n    end\n  end\n\n  def take_lysis_buff(op_count,op_in_cell_pellet)\n    op_table = [[\"Falcon tube ID\",\"Lysis buffer volume\",\"Protease inhibitor\"]]\n    for i in 0..(op_count-1)\n        row = []\n        row \u003c\u003c i+1\n        row \u003c\u003c \"20 mL\"\n        row \u003c\u003c \"2 tablets\"\n        op_table \u003c\u003c row\n    end\n    show do\n        title \"Lysis buffer preparation\"\n        check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 50 mL Falcon tube and a rack.\"\n        check \"Label tube from 1 to #{op_count} on the tube wall and cap.\"\n        check \"Grab lysis buffer and protease inhibitor from 4°C refrigerator.\"\n        check \"Pour 20 mL of lysis buffer to each tube.\"\n        check \"Add 2 tablets of protease inhibitor to each tube by using a tweezer.\"\n        table op_table\n        check \"Place tubes on platform shaker until the tablets are fully dissovled.\"\n        check \"Return lysis buffer and protease inhibitor.\"\n    end\n  end\n\n  def distribute_lysis_buff(op_count,op_in_cell_pellet)\n    op_table = [[\"50 mL Falcon tube ID\",\"225 mL Falcon tube ID\"]]\n    for i in 0..(op_count-1)\n        row = []\n        row \u003c\u003c i+1\n        row \u003c\u003c {content:op_in_cell_pellet[i], check: true}\n        op_table \u003c\u003c row\n    end\n    show do\n       title \"Suspend pellets in lysis buffer\"\n       note \"Perform the following steps on ice.\"\n       check \"Pour lysis buffer into the corresponding 225 mL tube.\"\n       table op_table\n       check \"Keep the used 50 mL Falcon tubes (ID from 1 to #{op_count}) on a rack for later use.\"\n       check \"Grab motorized pipet and \u003cb\u003e#{op_count}\u003c/b\u003e 25mL-serological pipette(s).\"\n       check \"Pipet up and down to suspend cell pellets in lysis buffer. In this step, you can scratch off the pellet by the pipette tip, and then suspend it until homogenized. Make sure no cell clumps remain on the pipette tip. No vortexing.\"\n       if op_count \u003c= 2\n            check \"Incubate #{op_in_cell_pellet.to_sentence} in ice bath for 15 minutes.\"\n            timer initial: { hours: 0, minutes: 15, seconds: 0}\n       end\n    end\n  end\n  \n  def lyse_cell_by_sonicator(op_count,op_in_cell_pellet,op_out_cell_lysate)\n    op_table = [[\"225 mL Falcon tube ID\",\"50 mL Falcon tube ID\"]]\n    for i in 0..(op_count-1)\n        row = []\n        row \u003c\u003c op_in_cell_pellet[i]\n        row \u003c\u003c i+1\n        op_table \u003c\u003c row\n    end\n    show do\n       title \"Transfer samples to Falcon tubes\"\n       check \"Pour cell lysate back to the corresponding 50 mL tube.\"\n       table op_table\n       check \"Place sample tubes in ice bath.\"\n       check \"Discard the used 225 mL tubes.\"\n       \n    end\n    show do\n        title \"Sonication preparation\"\n        bullet \"Bring the following items to the sonicator.\"\n        check \"All samples (ID: 1 to #{op_count}) and the ice bucket.\"\n        check \"a 600 mL beaker and marker pen\"\n        check \"Ethanol spray bottle and Kimwipes.\"\n    end\n  end\n  \n  def set_up_sonicator(op_count)\n    show do\n        title \"Set up a sonicator\"\n        bullet \"Turn on the sonicator.\"\n        bullet \"Press \u003cb\u003eENTER\u003c/b\u003e to set the processing parameters:\"\n        note  \"95% power delivered to the probe\"\n        note \"10 secs ON, 30 secs OFF, repeat 30 rounds and the total time is 1200 seconds.\"\n        bullet \"Spray the sonicator tip with Ethanol and wipe it dry with Kimwipes.\"\n        bullet \"Insert the tube (ID:1) in the beaker filled with ice. (as shown in the picture 1) \"\n        bullet \"Use the adjustable knob to immerse the sonicatior tip into the sample (as shown in the picture 2). Leave 2-3 cm space between tip point and the bottom of a tube.\"\n        warning \"Sonicator tip should not be touching the bottom or sides of the tube.\"\n        bullet \"Press \u003cb\u003eSTART\u003c/b\u003e to activiate sonication.\"\n        bullet \"After 30 rounds are done, screw the cap and put it back to the ice bucket. Circle the tube ID on the cap as completed.\"\n        bullet \"Spray the sonicator tip with Ethanol and wipe it dry in each time switching to the next tube.\"\n        bullet \"Pour off water from the beaker and add fresh ice on the top in each time starting a new cycle of sonication, preventing ice melting too fast. (as shown in the picture 3 \u0026 4)\"\n        bullet \"Perform sonication from tube 1 to #{op_count} until all tubes have been done.\"\n        #warning \"A temperature increase in the sample might denature protein. Keep the tube on ice while performing sonication.\"\n        image \"Actions/ProteinPurification/sonication_four_steps.jpg\"\n    end\n  end\n  \n  def add_binding_buffer(op_count)\n    show do\n        title \"Add purification buffer\"\n        check \"Grab purification buffer from 4°C refrigerator.\"\n        check \"Add purification buffer up to the 40 mL-mark in each tube (ID from 1 to #{op_count}).\"\n        check \"Keep tubes in ice bath.\"\n        check \"Return purification buffer to 4°C refrigerator.\"\n    end\n  end\n    \n  def weigh_and_balance_tubes(op_count)\n    show do\n        title \"Scale balancing\"\n        check \"Weigh the tubes. Balance samples in tubes.\"\n        check \"If the balance is off, add Purification Buffer into the sample tube until a balance is reached.\"\n        warning \"It's very important to balance tubes before using the high-speed centrifuge.\"\n    end\n  end\n  \n  def spin_hs_centrifuge(op_count)\n    show do\n        title \"Spin down cells\"\n        note \"Bring tubes (ID: 1 to #{op_count}) in a ice bucket to a high-speed centrifuge.\"\n        check \"Spin at 24,000g for 30 minutes at 4°C.\"\n        timer initial: { hours: 0, minutes: 30, seconds: 0}\n        check \"Remove tubes from the high speed centrifuge. Keep tubes in ice bath.\"\n        image \"Actions/ProteinPurification/high_speed_centrifuge.jpg\"\n    end\n  end\n    \n\n  def transfer_supernatant_to_new_tubes_label(op_count,op_in_cell_pellet,op_out_cell_lysate)\n    op_table = [[\"Sample tube ID\",\"column ID\"]]\n    for i in 0..(op_count-1)\n        row = []\n        row \u003c\u003c i+1\n        row \u003c\u003c {content:op_out_cell_lysate[i], check: true}\n        op_table \u003c\u003c row\n    end\n    \n    show do\n        title \"Transfer samples\"\n        check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 50 mL Falcon tube(s).\"\n        check \"Label tube(s) with ID: #{op_out_cell_lysate.to_sentence} on the tube wall and cap.\"\n        check \"Pour supernatant to new tubes according to the table.\"\n        check \"Place tubes in ice bath.\"\n        table op_table\n    end\n    \n    show do\n        title \"Clean up\"\n        check \"Discard tubes with ID: 1 to #{op_count}.\"\n    end\n  end\nend\n","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to lyse cell by a sonicator and then spin the sample to collet supernatant for applying to a packed column.\r\n\r\n- Workflow:\r\n  - Column Packing \u003e *Lyse cell* \u003e His-tagged Purification\r\n- Steps:\r\n  - [01] Grab cell pellet from -80°C freezer and thaw it on ice.\r\n  - [02] Prepare lysis buffer.\r\n  - [03] Suspend cell pellet in lysis buffer and incubate for 20 minutes on ice.\r\n  - [04] Lyse cell by a sonicator.\r\n  - [05] Spin down cell with a high speed centrifuge.\r\n  - [06] Keep supernatant and discard the cell pellet.","test":"","timing":null}},{"sample_types":[{"id":69,"name":"Assay Buffer","description":"A buffer that is tailored to a specific type of assay or experiment","created_at":"2017-12-18T15:09:05.000-08:00","updated_at":"2017-12-18T15:09:05.000-08:00","field_types":[]}],"object_types":[{"id":484,"name":"500 mL Liquid","description":"500 mL Liquid","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"  {\r\n    \"samples\": [\r\n      { \"name\": \"Histidine Solution\",   \"materials\": 16.04, \"labor\": 3.50, \"unit\": \"mL\", \"total_volume\": 500 },\r\n      { \"name\": \"Leucine Solution\",  \"materials\": 15.07, \"labor\": 3.50, \"unit\": \"mL\", \"total_volume\": 500 },\r\n      { \"name\": \"Tryptophan Solution\",  \"materials\": 19.29, \"labor\": 3.50, \"unit\": \"mL\", \"total_volume\": 500},\r\n      { \"name\": \"Uracil Solution\",   \"materials\": 13.57, \"labor\": 3.50, \"unit\": \"mL\", \"total_volume\": 500},\r\n      { \"name\": \"10% Glycerol\", \"materials\": 0.0062, \"labor\": 0.0144, \"unit\": \"mL\", \"total_volume\": 500 }\r\n    ]\r\n  }","vendor":"No vendor information","created_at":"2016-03-08T10:35:12.000-08:00","updated_at":"2017-06-22T09:43:14.000-07:00","unit":"Media","cost":0.01,"release_method":"return","release_description":"","sample_type_id":15,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Media"}],"operation_type":{"name":"Lysis Buffer Preparation","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"output","name":"Lysis buffer","sample_types":["Assay Buffer"],"object_types":["500 mL Liquid"],"part":false,"array":false,"routing":"L","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"#Pei 2019\n#Recipe: 1X PBS, 1% Trition X-100, pH 7.4 EDTA-Free protease inhibitor(freshly add in the protocol of \"Lyse Cell\")\n\n\nclass Protocol\n\n  def main\n\n    operations.make\n    \n    show do\n            title \"Gather the Following Items:\"\n            check \"a 600 mL beaker and label it with lysis buffer.\"\n            check \"10X PBS (pH 7.4)\"\n            check \"Trition X-100\"\n    end\n    \n    show do\n            title \"Add following chemical reagents to a 600 mL beaker.\"\n            check \"300 mL of sterile DI water\"\n            note \"**If there is no sterile water, use DI water and then filter the buffer by a top-bottle filter in the final step of this protocol.**\"\n            check \"Using a serological pipette, add 50mL of 10X PBS to the beaker.\"\n            check \"Using a serological pipette, add 5 mL of Triton X-100 to the beaker.\"\n            check \"Fill the beaker with sterile DI water up to the 500-mL mark.\"\n            check \"Put a stir bar in the beaker and stir the buffer for 2 minutes.\"\n    end\n    \n \n    show do\n            title \"Label the bottle\"\n            check \"Grab a 500 mL bottle and label it with \u003cb\u003eLysis Buffer, your initials, the date\u003c/b\u003e\"\n            check \"Pour the prepared buffer to bottle.\"\n            note \"If you are using non-sterile DI water, filter the buffer by a top-bottle filter in this step.\"\n            check \"Place the Lysis buffer in 4°C refrigerator(BO.110).\"\n    end\n    \n    show do\n            title \"Clean up\"\n            check \"Place the used beaker in the dishwashing area.\"\n    end\n    \n    \n    operations.store interactive: false\n    \n    return {}\n    \n  end\n\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to prepare lysis buffer for His-tagged protein purification workflow.\n\n- Steps:\n  - [01] Gather the chemical reagents.\n  - [02] Prepare the buffer according to the receipe.\n  - [03] Measure and adjust the pH value to 8.0\n  - [04] Keep the buffer in 4°C refrigerator.","test":"","timing":null}},{"sample_types":[{"id":69,"name":"Assay Buffer","description":"A buffer that is tailored to a specific type of assay or experiment","created_at":"2017-12-18T15:09:05.000-08:00","updated_at":"2017-12-18T15:09:05.000-08:00","field_types":[]}],"object_types":[],"operation_type":{"name":"Make IPTG Aliquots","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"output","name":"IPTG Aliquot","sample_types":["Assay Buffer"],"object_types":[null],"part":false,"array":false,"routing":"I","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"#Pei, 2019\n#Recipe: 0.5M IPTG solution (final concentration in the 450 mL of cell culture is 0.5mM), molar mass of IPTG(Isopropyl beta-D-1-thiogalactopyranoside): 238.30 g/mol\n\nclass Protocol\n\n  def main\n\n    operations.make\n    \n    show do\n            title \"Gather the Following Items:\"\n            check \"\u003cb\u003e18\u003c/b\u003e 1.5 mL tubes and label them with \u003cb\u003eIPTG\u003c/b\u003e\"\n            check \"a bottle of IPTG powder (1g / per bottle)\"\n    end\n    \n    show do\n            title \"Add water to the bottle\"\n            check \"Add 8.3 mL of sterile DI water\"\n            check \"Mix the solution until IPTG powder is fully dissolved.\"\n    end\n\n    show do\n            title \"Make aliquots\"\n            check \"Distribute 450 µl of the IPTG-buffer into the 1.5 mL tubes.\"\n            check \"Place the aliquots in a box labeled \u003cb\u003eprotein purification\u003c/b\u003e in -20°C freezer (B1-165).\"\n    end\n    \n    show do\n            title \"Clean up\"\n            check \"Discard the empty bottle.\"\n    end\n    \n    \n    operations.store interactive: false\n    \n    return {}\n    \n  end\n\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to prepare IPTG aliquots for His-tagged protein purification workflow.\n\n- Steps:\n  - [01] Gather the chemical reagents.\n  - [02] Prepare the buffer according to the receipe.\n  - [03] Keep aliquots in -20°C freezer.","test":"","timing":null}},{"sample_types":[{"id":69,"name":"Assay Buffer","description":"A buffer that is tailored to a specific type of assay or experiment","created_at":"2017-12-18T15:09:05.000-08:00","updated_at":"2017-12-18T15:09:05.000-08:00","field_types":[]}],"object_types":[],"operation_type":{"name":"Make Imidazole Aliquots","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"output","name":"Imidazole Aliquot","sample_types":["Assay Buffer"],"object_types":[null],"part":false,"array":false,"routing":"I","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"#Pei, 2019\n#Recipe: 5M imidazole solution,pH 8.0 molar mass of imidazole: 68.077 g/mol\n\nclass Protocol\n\n  def main\n\n    operations.make\n    \n    show do\n            title \"Gather the Following Items:\"\n            check \"\u003cb\u003e17\u003c/b\u003e 2 mL tubes and label them with \u003cb\u003eimidazile\u003c/b\u003e\"\n            check \"imidazole\"\n            check \"a 50 mL beaker\"\n    end\n    \n    show do\n            title \"Add following reagents to the beaker\"\n            check \"10.2 g of imidazole.\"\n            check \"15 mL of sterile DI water\"\n            check \"Put a stir bar in the beaker and stir the buffer on the stir plate until imidazole is fully dissolved.\"\n    end\n    \n    show do\n            title \"pH value calibration\"\n            check \"Grab pH meter from the drawer.\"\n            check \"Grab three 50 mL Falcon tubes.\"\n            check \"Label the tubes with pH 4, pH 7 and pH 10.\"\n            check \"Grab pH standard solutions: pH 4 (red), pH 7 (yellow), pH 10 (blue).\"\n            check \"Distribute 45 mL of each pH standard solutions into three different tubes.\"\n            check \"Press \u003cb\u003eON/OFF\u003c/b\u003e button on the pH meter.\"\n            check \"Dip electrode about 2 cm into the pH 7 (yellow) standard buffer solution.\"\n            check \"Press the CAL button to enter calibration mode. The CAL indicator will be shown on the screen display.\"\n            check \"Allow about 30-40 seconds for the pH meter reading to stablize, then press the \u003cb\u003eHOLD/ENT\u003c/b\u003e button to confirm the first calibration point.\"\n            check \"Rinse electrode by DI water and wipe it dry with KimWipes.\"\n    end\n    \n    show do\n            title \"Second calibration point\"\n            check \"Dip electrode about 2 cm into the pH 4 (red) standard buffer solution.\"\n            check \"Press the CAL button to enter calibration mode. The CAL indicator will be shown on the screen display.\"\n            check \"Allow about 30-40 seconds for the pH meter reading to stablize, then press the \u003cb\u003eHOLD/ENT\u003c/b\u003e button to confirm the second calibration point.\"\n            check \"Rinse electrode by DI water and wipe it dry with KimWipes.\"\n    end \n    \n    show do\n            title \"Third calibration point\"\n            check \"Dip electrode about 2 cm into the pH 10 (blue) standard buffer solution.\"\n            check \"Press the CAL button to enter calibration mode. The CAL indicator will be shown on the screen display.\"\n            check \"Allow about 30-40 seconds for the pH meter reading to stablize, then press the \u003cb\u003eHOLD/ENT\u003c/b\u003e button to confirm the third calibration point.\"\n            check \"After the third point calibration, the meter will automatically return to the measurement mode.\"\n            check \"Rinse electrode by DI water and wipe it dry with KimWipes.\"\n    end\n    \n    show do\n            title \"pH value adjustment\"\n            check \"Dip electrode about 2 cm into the buffer in the 500 mL beaker.\"\n            check \"Use 5M NaOH or HCl solution to adjust the pH value to pH 8.0\"\n            note \"Continuely stir the buffer on a stir plate.\"\n            note \"Wait for 1 minutes to let the reading stablize. Make sure the pH value is 8.0\"\n            check \"Press \u003cb\u003eON/OFF\u003c/b\u003e to turn off the meter.\"\n            check \"Rinse electrode by DI water and wipe it dry with KimWipes.\"\n            check \"Return the meter and three standard buffers.\"\n    end\n\n    show do\n            title \"Make aliquots\"\n            check \"Fill the beaker with sterile DI water to the 30 mL mark. Stir the buffer for 2 minutes.\"\n            check \"Aliquot 1800 µl of the buffer into each 2 mL tubes.\"\n            check \"Place the aliquots in a box labeled \u003cb\u003eprotein purification\u003c/b\u003e in -20°C freezer (B1-165).\"\n    end\n    \n    show do\n            title \"Clean up\"\n            check \"Discard the used beaker and stir bar.\"\n    end\n    \n    \n    operations.store interactive: false\n    \n    return {}\n    \n  end\n\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to prepare imidazole aliquots for His-tagged protein purification workflow.\n\n- Steps:\n  - [01] Gather the chemical reagents.\n  - [02] Prepare the buffer according to the receipe.\n  - [03] Measure and adjust the pH value to 8.0\n  - [04] Keep aliquots in -20°C freezer.","test":"","timing":null}},{"sample_types":[{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker","ftype":"string","choices":"Amp,Kan,Amp + Kan,Spec,Kan + Spec,Chlor,Tet,NA,Other","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-12-27T11:26:31.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS,TRP,URA,LEU,NatMX,KanMX,HygMX,BleoMX,5FOA,NA,Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-02-13T10:49:58.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":27,"field_type_id":7,"sample_type_id":1,"object_type_id":null,"created_at":"2017-02-13T10:49:58.000-08:00","updated_at":"2017-02-13T10:49:58.000-08:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":46,"parent_id":2,"name":"QC Primer1","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":29,"field_type_id":46,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":47,"parent_id":2,"name":"QC Primer2","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":30,"field_type_id":47,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":48,"parent_id":2,"name":"QC_length","ftype":"number","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5816,"parent_id":2,"name":"Transformation Temperature","ftype":"number","choices":"37,30","array":false,"required":false,"created_at":"2018-09-17T15:02:22.000-07:00","updated_at":"2018-11-06T11:31:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":366,"name":"TB Overnight of Plasmid","description":"An overnight of E. coli transformed with a plasmid in TB + antibiotic","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2014-02-25T17:07:26.000-08:00","updated_at":"2015-03-02T10:21:13.000-08:00","unit":"Plasmid","cost":0.01,"release_method":"return","release_description":"","sample_type_id":2,"image":"","prefix":"DFO","rows":null,"columns":null,"sample_type_name":"Plasmid"}],"operation_type":{"name":"Make Overexpression","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Overnight","sample_types":["Plasmid"],"object_types":["TB Overnight of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Overexpression","sample_types":["Plasmid"],"object_types":["TB Overnight of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\r\n\r\nneeds \"Cloning Libs/Cloning\"\r\nneeds \"Standard Libs/Debug\"\r\nneeds \"Standard Libs/Feedback\"\r\n\r\nclass Protocol\r\n\r\n  include Feedback\r\n  include Cloning\r\n  include Debug\r\n\r\n  def main\r\n    # Remove the starter from the shaker.\r\n    operations.retrieve\r\n    \r\n    # check the starter(input) have growth\r\n    verify_growth(operations)\r\n    \r\n    operations.make\r\n\r\n    op_in_overnight = []\r\n    op_in_bac = []\r\n    op_out_overexpression = []\r\n    op_count = 0\r\n\r\n    operations.each do |op|\r\n        op_count = op_count + 1\r\n        op_in_overnight \u003c\u003c op.input(\"Overnight\").item.id\r\n        op_in_bac \u003c\u003c op.input(\"Overnight\").child_sample.properties[\"Bacterial Marker\"].upcase\r\n        op_out_overexpression \u003c\u003c op.output(\"Overexpression\").item.id\r\n    end\r\n\r\n\r\n    take_flask_add_medium(op_count,op_out_overexpression,op_in_bac)\r\n\r\n    grow_culture_in_shaker(op_count,op_in_overnight,op_out_overexpression)\r\n\r\n    operations.running.each do |op|\r\n      op.input(\"Overnight\").child_item.store\r\n    end    \r\n    operations.store(io: \"input\", interactive: true)\r\n    \r\n    set_timer_150mins(op_out_overexpression,op_count)\r\n\r\n    od_tmp = measure_od_value(op_out_overexpression)\r\n\r\n    record_od_and_decide(od_tmp, operations)\r\n\r\n    # Check if there's any sample need to re-measure OD, max. 10 times of re-measureing.\r\n    for i in 1..10\r\n        re_measure_op = operations.select { |op| op.temporary[:redo]==true }.map\r\n        if re_measure_op.size == 0\r\n            break\r\n        else\r\n            op_tmp_overexpression = []\r\n            re_measure_op.each do |op|\r\n                op_tmp_overexpression \u003c\u003c op.output(\"Overexpression\").item.id\r\n            end\r\n            od_tmp = measure_od_value(op_tmp_overexpression)\r\n            record_od_and_decide(od_tmp, re_measure_op)\r\n        end\r\n    end\r\n    \r\n    # after 10 times, delete the sample whose OD value is still too low.\r\n    re_measure_op = operations.select { |op| op.temporary[:redo]==true }.map\r\n    if re_measure_op.size != 0\r\n        tmp_id = []\r\n        re_measure_op.each do |op|\r\n            culture = op.output(\"Overexpression\").item\r\n            tmp_id \u003c\u003c culture.id\r\n            culture.mark_as_deleted\r\n            culture.save\r\n            op.temporary[:redo] = false\r\n            op.temporary[:delete] = true\r\n            op.error :od_error, \"The cell density of #{culture.id} is too high to do induction. Tell the manager and discard the cell culture in the dishwashing area.\"\r\n        end\r\n        show do\r\n            title \"Sample deleted!\"\r\n            note \"#{tmp_id.to_sentence} are deleted because their OD values are still too low after 10 times.\"\r\n        end\r\n    end\r\n        \r\n\r\n    \r\n    # move overexpression to \"37°C shaker incubator\"\r\n    operations.running.each do |op|\r\n      op.output(\"Overexpression\").child_item.move \"4°C or on bench for (next) protocol\"\r\n    end\r\n    \r\n    clean_up(op_out_overexpression)\r\n    \r\n    operations.store(io: \"output\", interactive: true)\r\n    \r\n    get_protocol_feedback\r\n    \r\n    return {}\r\n  end\r\n  \r\n  def verify_growth(operations)\r\n    verify_growth = show do\r\n        title \"Check if overnight starters have growth\"\r\n        note \"Choose No for the overnight starter that does not have growth. Empty flask and put in the clean station.\"\r\n        operations.each do |op|\r\n            in_id = op.input(\"Overnight\").item.id\r\n            select [\"Yes\", \"No\"], var: \"verify #{in_id}\", label: \"Does flask #{in_id} have growth?\"  \r\n        end\r\n    end\r\n    \r\n    operations.select { |op| verify_growth[:\"verify#{op.input(\"Overnight\").item.id}\".to_sym] == \"No\" }.each do |op|\r\n        on = op.input(\"Overnight\").item\r\n        on.mark_as_deleted\r\n        on.save\r\n            \r\n        op.error :no_growth, \"Your overnight starter had no growth!\"\r\n    end\r\n  end    \r\n  \r\n  def take_flask_add_medium(op_count,op_out_overexpression,op_in_bac)\r\n    op_table = [[\"Overexpression flask ID\",\"Media\"]]\r\n    for i in 0..(op_count-1)\r\n      row = []\r\n      row \u003c\u003c {content:op_out_overexpression[i], check: true}\r\n      row \u003c\u003c \"440 mL TB + \" + op_in_bac[i]\r\n      op_table \u003c\u003c row\r\n    end\r\n    \r\n    show do \r\n      title \"Label flasks and load media\"\r\n      check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 2L flask(s) (Sterile). Write ID #{op_out_overexpression.to_sentence} on a piece of lab tape and affix it on the flask.\"\r\n      check \"Grab a graduated cylinder (Sterile). Add 440 mL of media to each flask according to the table below.\"\r\n      table op_table\r\n      image \"Actions/ProteinPurification/glass_flask_column_packing.jpg\"\r\n    end\r\n  end\r\n  \r\n   # tell technicians to return the cultures to the 37°C shaker\r\n  def grow_culture_in_shaker(op_count,op_in_overnight,op_out_overexpression)\r\n    op_table = [[\"Overnight starter ID\",\"Volume\",\"Overexpression flask ID\"]]\r\n    for i in 0..(op_count-1)\r\n      row = []\r\n      row \u003c\u003c op_in_overnight[i]\r\n      row \u003c\u003c \"10 mL\"\r\n      row \u003c\u003c {content:op_out_overexpression[i], check: true}\r\n      op_table \u003c\u003c row\r\n    end\r\n    \r\n    show do\r\n      title \"Transfer the overnight starter into the flask\"\r\n      check \"Grab a motorized pipet.\"\r\n      check \"Swirl the bottle and transfer 10 mL of overnight starter culture into the corresponding flask by using a motorized pipet.\"\r\n      note \"**Use a new serological pipette for each batch to avoid cross contamination.**\"\r\n      table op_table\r\n      check \"Return the motorized pipet.\"\r\n    end\r\n    \r\n    show do\r\n        title \"Store overnight starter\"\r\n        check \"In the Media Bay, collect \u003cb\u003e#{op_count}\u003c/b\u003e 14 mL tube(s).\"\r\n        check \"Label tube(s) with ID: #{op_in_overnight.to_sentence}.\"\r\n        check \"Pour all the remaining overnight starter in the glass flask to the corresponding 14 mL tube.\"\r\n    end\r\n  end\r\n  \r\n   def set_timer_150mins(op_out_overexpression,op_count)\r\n    show do\r\n      title \"Grow cell culture in 37°C shaker\"\r\n      check \"Incubate #{op_out_overexpression.to_sentence} at 37°C shaker.\"\r\n      check \"Set a 80-minute timer.\" \r\n      timer initial: { hours: 1, minutes: 20, seconds: 0}\r\n    end\r\n    \r\n    show do\r\n        title \"Check cell density\"\r\n        check \"Retrieve #{op_out_overexpression.to_sentence} from 37°C shaker.\"\r\n        check \"Grab \u003cb\u003e#{op_count}\u003c/b\u003e 1.5 mL tube(s). Label with ID: #{op_out_overexpression.to_sentence}.\"\r\n        check \"Spray a P1000 pipettor with ethanol and wipe it dry with a paper towel.\"\r\n        check \"Swirl the bottle and transfer 1mL of cell culture to the corresponding 1.5 mL tube.\"\r\n        note \"**The flask walls should not be touching the pipettor.**\"\r\n        check \"Temporarily keep the 2L flask(s) on bench.\"\r\n    end\r\n  end\r\n  \r\n  def measure_od_value(meas_sample)\r\n    od_value = []\r\n    show do\r\n        title \"Measure OD600 value of cell culture in MolES lab\"\r\n        check \"Grab a box to carry the following items:\"\r\n        bullet \"a box of 1000 µl tip\"\r\n        bullet \"a P1000 pipettor\" \r\n        bullet \"a tip waste container\" \r\n        bullet \"#{meas_sample.size+1} plastic cuvettes\"\r\n        bullet \"1 mL of TB aliquot\"\r\n        bullet \"a marker pen\"\r\n        bullet \"1 mL of sample in a 1.5 mL tube: #{meas_sample.to_sentence}\"\r\n    end\r\n    \r\n    show do\r\n        title \"Measure OD600 value of cell culture in MolES lab\"\r\n        note \"Perform the following steps with #{meas_sample.to_sentence}.\"\r\n        bullet \"Open Nanodrop 2000 \u003cb\u003e\u003e\u003c/b\u003e Home \u003cb\u003e\u003e\u003c/b\u003e cell culture \u003cb\u003e\u003e\u003c/b\u003e use cuvette \u003cb\u003e\u003e\u003c/b\u003e pathlength: 10mm \u003cb\u003e\u003e\u003c/b\u003e stir speed: off\"\r\n        bullet \"Blank with 1 mL TB in a cuvette.\"\r\n        bullet \"Transfer TB back to its 1.5 mL tube.\"\r\n        bullet \"Transfer 1 mL of sample to a new cuvette.\"\r\n        bullet \"Measure OD600 value and record it on the 1.5 mL tube wall.\"\r\n        bullet \"Discard sample into the liquid waste container.\"\r\n        bullet \"Keep the sample tube labeled with OD value.\"\r\n        image \"Actions/ProteinPurification/cuvette_nanodrop.jpg\"\r\n    end\r\n    meas_sample.each do |id|\r\n      od = show do\r\n        title \"Enter OD value of cell culture\"\r\n        get \"number\", var: \"x\", label: \"OD600 value of #{id}\", default: 0.8\r\n      end\r\n      od_value \u003c\u003c od[:x]\r\n    end\r\n    return od_value\r\n  end\r\n  \r\n  \r\n  def record_od_and_decide(od_tmp,op_list)\r\n    op_table = [[\"Batch\",\"Sample ID\",\"OD value\",\"Action\"]]\r\n\r\n    timer_flag = 0\r\n    sample_remeasure = []\r\n    \r\n    j = 0\r\n\r\n    op_list.each do |op|\r\n        row = []\r\n        row \u003c\u003c (j + 1)\r\n        culture = op.output(\"Overexpression\").item\r\n        # associate the OD value to the outputs\r\n        culture.associate :od_value, od_tmp[j]\r\n        row \u003c\u003c culture.id\r\n        row \u003c\u003c od_tmp[j]\r\n        if od_tmp[j].to_f \u003e 3\r\n            culture.mark_as_deleted\r\n            culture.save\r\n            op.temporary[:redo] = false\r\n            op.temporary[:delete] = true\r\n            op.error :od_error, \"The cell density of #{culture.id} is too high to do induction. Tell the manager and discard the cell culture in the dishwashing area.\"\r\n            row \u003c\u003c \"Discard the sample\"\r\n        else\r\n            if od_tmp[j].to_f \u003c 0.8\r\n                row \u003c\u003c \"Return the cell culture to 37°C shaker and remeasure OD value after 15 minutes.\"\r\n                op.temporary[:redo] = true\r\n                sample_remeasure \u003c\u003c culture.id\r\n                timer_flag = 1\r\n            else\r\n                row \u003c\u003c \"This cell culture is ready for the next step. If there has another batch of cell culture waiting for a remeasurement, place this cell culture on the bench until all remeasurements are finished.\" \r\n                op.temporary[:redo] = false\r\n            end\r\n        end\r\n        op_table \u003c\u003c row\r\n        j = j + 1\r\n    end\r\n    \r\n    show do\r\n        title \"Cell density and actions\"\r\n        table op_table\r\n        if timer_flag == 1\r\n            bullet \"Return #{sample_remeasure.to_sentence} to 37°C shaker. The cell density is too low.\"\r\n            bullet \"Remeasure OD value of the sample: #{sample_remeasure.to_sentence} after 15 minutes.\"\r\n            timer initial: { hours: 0, minutes: 15, seconds: 0}\r\n        end\r\n    end\r\n    \r\n  end\r\n  \r\n  def clean_up(op_out_overexpression)\r\n    show do\r\n        title \"Clean up\"\r\n        check \"Discard used 1.5 mL tube(s) of #{op_out_overexpression.to_sentence}.\"\r\n        check \"Clean plastic cuvettes by rinsing with water twice.\"\r\n        check \"Rinse cuvettes with 70% ethanol.\"\r\n        check \"Return them back to the storage box.\"\r\n    end\r\n  end\r\n\r\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to grow the cell culture for making a protein of interest.\n\n- Workflow:\n  - Make a Starter \u003e *Make Overexpression* \u003e IPTG induction\n- Steps:\n  - [01] Label a 2L flask and load 450 mL of LB with ampicilin to the flask.\n  - [02] Transfer 10 mL of overnight starter culture into the flask.\n  - [03] Grow cell culture in 37C shaker for 2.5 hours.\n  - [04] Measure OD600 value and make sure the cell density is in the range of 0.6-1.2.","test":"","timing":null}},{"sample_types":[{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker","ftype":"string","choices":"Amp,Kan,Amp + Kan,Spec,Kan + Spec,Chlor,Tet,NA,Other","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-12-27T11:26:31.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS,TRP,URA,LEU,NatMX,KanMX,HygMX,BleoMX,5FOA,NA,Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-02-13T10:49:58.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":27,"field_type_id":7,"sample_type_id":1,"object_type_id":null,"created_at":"2017-02-13T10:49:58.000-08:00","updated_at":"2017-02-13T10:49:58.000-08:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":46,"parent_id":2,"name":"QC Primer1","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":29,"field_type_id":46,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":47,"parent_id":2,"name":"QC Primer2","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":30,"field_type_id":47,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":48,"parent_id":2,"name":"QC_length","ftype":"number","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5816,"parent_id":2,"name":"Transformation Temperature","ftype":"number","choices":"37,30","array":false,"required":false,"created_at":"2018-09-17T15:02:22.000-07:00","updated_at":"2018-11-06T11:31:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":552,"name":"Checked E coli Plate of Plasmid","description":"It's a checked plate","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2017-07-12T19:25:39.000-07:00","updated_at":"2017-07-12T19:44:15.000-07:00","unit":"plate","cost":0.01,"release_method":"return","release_description":"","sample_type_id":2,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Plasmid"},{"id":209,"name":"Plasmid Glycerol Stock","description":"Glycerol Stock of E. coli (usually DH5alpha) containing plasmid DNA stock","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2013-10-15T10:04:16.000-07:00","updated_at":"2014-01-22T16:52:00.000-08:00","unit":"Plasmid","cost":5.0,"release_method":"return","release_description":"","sample_type_id":2,"image":"","prefix":"M80","rows":null,"columns":null,"sample_type_name":"Plasmid"},{"id":366,"name":"TB Overnight of Plasmid","description":"An overnight of E. coli transformed with a plasmid in TB + antibiotic","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2014-02-25T17:07:26.000-08:00","updated_at":"2015-03-02T10:21:13.000-08:00","unit":"Plasmid","cost":0.01,"release_method":"return","release_description":"","sample_type_id":2,"image":"","prefix":"DFO","rows":null,"columns":null,"sample_type_name":"Plasmid"}],"operation_type":{"name":"Make a Starter","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Plasmid","sample_types":["Plasmid","Plasmid"],"object_types":["Checked E coli Plate of Plasmid","Plasmid Glycerol Stock"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Overnight","sample_types":["Plasmid"],"object_types":["TB Overnight of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Oct 2018\n# Note: modified from \"Cloning/Make Overnight Suspension\"\n\nneeds \"Cloning Libs/Cloning\"\nneeds \"Standard Libs/Debug\"\nneeds \"Standard Libs/Feedback\"\n\nclass Protocol\n\n  include Feedback    \n  include Cloning\n  include Debug\n\n  def main\n      \n    operations.retrieve(interactive: false)\n    \n    operations.make\n    \n    p_ot = ObjectType.where(name: \"Checked E coli Plate of Plasmid\").first \n    \n    raise \"Could not find object type 'Checked E coli Plate of Plasmid'\" unless p_ot\n    \n    plate_inputs = operations.running.select { |op| op.input(\"Plasmid\").item.object_type_id == p_ot.id }\n    \n    g_ot = ObjectType.where(name: \"Plasmid Glycerol Stock\").first \n    \n    raise \"Could not find object type 'Plasmid Glycerol Stock'\" unless g_ot \n    \n    glycerol_stock_inputs = operations.running.select { |op| op.input(\"Plasmid\").item.object_type_id == g_ot.id }\n    \n    overnight_steps plate_inputs, \"Checked E coli Plate of Plasmid\" if plate_inputs.any?\n    overnight_steps glycerol_stock_inputs, \"Plasmid Glycerol Stock\" if glycerol_stock_inputs.any?\n    \n    # Associate input id with from data for overnight.\n    operations.running.each do |op|\n      gs = op.input(\"Plasmid\").item\n      on = op.output(\"Overnight\").item\n      \n      on.associate :from, gs.id\n      pass_data \"sequencing results\", \"sequence_verified\", from: gs, to: on\n    end\n    \n    operations.running.each do |op|\n      op.output(\"Overnight\").child_item.move \"37°C shaker incubator\"\n    end\n    \n    operations.store\n    \n    get_protocol_feedback\n    \n    return {}\n\n  end \n  \n  def overnight_steps(ops, ot)\n    if ot == \"Plasmid Glycerol Stock\"\n      ops.retrieve interactive: false\n    else\n      ops.retrieve\n    end\n    \n    # Sorting ops by the bacterial marker attribute\n    temp = ops.sort do |op1,op2|\n      op1.input(\"Plasmid\").child_sample.properties[\"Bacterial Marker\"].upcase \u003c=\u003e op2.input(\"Plasmid\").child_sample.properties[\"Bacterial Marker\"].upcase\n    end\n    ops = temp\n    \n    ops.extend(OperationList)\n   \n    #Label and load overnight tubes \n    label_load_tubes ops\n\n    #Inoculation\n    inoculate ot, ops\n      \n  end\n  \n  # Given operations, tells the technician to label and load the tubes the tubes\n  def label_load_tubes ops\n    show do\n      title \"Label and load overnight glass flasks\"\n      check \"Grab \u003cb\u003e#{ops.length}\u003c/b\u003e 125 mL glass flask (sterile).\"\n      check \"Grab media in 4°C refrigerator according to the table below.\"\n      check \"Write the overnight ID on a piece of lab tape and affix it on the glass flask.\"\n      check \"Remove caps from the top of glass flasks.\"\n      check \"Add 15 mL of media to each glass flask by using a motorized pipet.\"\n      table ops.start_table\n        .output_item(\"Overnight\", checkable: true)\n        .custom_column(heading: \"Media\") { |op| \"TB+\" + op.input(\"Plasmid\").child_sample.properties[\"Bacterial Marker\"].upcase}\n        .custom_column(heading: \"Volume\") { |op| \"15 mL\" }\n        .end_table\n    end\n  end\n  \n  # Tells the technician to inoculate colonies from plate into glass flask.\n  def inoculate ot, ops\n    show {\n      title \"Inoculation from #{ot}\"\n      # note \"Use 10 uL sterile tips to inoculate colonies from plate into 14 mL tubes according to the following table.\" if ot == \"Checked E coli Plate of Plasmid\"\n      check \"Spray a P1000 pipettor with ethanol and wipe it dry.\"\n      check \"Use 1000 µl pipette tip to inoculate an isolated colony from plate into 125 mL flask according to the following table.\" if ot == \"Checked E coli Plate of Plasmid\"\n      check \"Use 100 µl pipette to inoculate cells from glycerol stock into the 125 mL flask according to the following table.\" if ot == \"Plasmid Glycerol Stock\"\n      note \"**The inside flask walls should not be touching the pipettor.**\"\n      check \"Put caps back on the top of glass flasks.\"\n      check \"Return the media to the refrigerator.\"\n      table ops.start_table\n        .input_item(\"Plasmid\", heading: ot)\n        .custom_column(heading: \"#{ot} Location\") { |op| op.input(\"Plasmid\").item.location }\n        .output_item(\"Overnight\", checkable: true)\n        .end_table\n     \n    } \n  end\nend ","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to prepare an overnight starter for the next day to amplify a large volume of cell culture.\n\n- Workflow:\n  - Check Plate \u003e *Make a Starter* \u003e Make Overexpression \n- Steps:\n  - [01] Grab a 200 mL glass flask and label with ID.\n  - [02] Load 12 mL of LB with ampicilin to the flask.\n  - [03] Use a 10 µl sterile tip to inoculate an isolated colony from the plate into 200 mL glass flask.\n  - [04] Incubate cell in 37C shaker overnight.","test":"","timing":null}},{"sample_types":[{"id":69,"name":"Assay Buffer","description":"A buffer that is tailored to a specific type of assay or experiment","created_at":"2017-12-18T15:09:05.000-08:00","updated_at":"2017-12-18T15:09:05.000-08:00","field_types":[]}],"object_types":[{"id":484,"name":"500 mL Liquid","description":"500 mL Liquid","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"  {\r\n    \"samples\": [\r\n      { \"name\": \"Histidine Solution\",   \"materials\": 16.04, \"labor\": 3.50, \"unit\": \"mL\", \"total_volume\": 500 },\r\n      { \"name\": \"Leucine Solution\",  \"materials\": 15.07, \"labor\": 3.50, \"unit\": \"mL\", \"total_volume\": 500 },\r\n      { \"name\": \"Tryptophan Solution\",  \"materials\": 19.29, \"labor\": 3.50, \"unit\": \"mL\", \"total_volume\": 500},\r\n      { \"name\": \"Uracil Solution\",   \"materials\": 13.57, \"labor\": 3.50, \"unit\": \"mL\", \"total_volume\": 500},\r\n      { \"name\": \"10% Glycerol\", \"materials\": 0.0062, \"labor\": 0.0144, \"unit\": \"mL\", \"total_volume\": 500 }\r\n    ]\r\n  }","vendor":"No vendor information","created_at":"2016-03-08T10:35:12.000-08:00","updated_at":"2017-06-22T09:43:14.000-07:00","unit":"Media","cost":0.01,"release_method":"return","release_description":"","sample_type_id":15,"image":"","prefix":"","rows":null,"columns":null,"sample_type_name":"Media"}],"operation_type":{"name":"Purification Buffer Preparation","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"output","name":"Purification Buffer","sample_types":["Assay Buffer"],"object_types":["500 mL Liquid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"#Pei 2019\n#Recipe: 50mM sodium phosphate buffer, 300mM NaCl (molar mass: 58.44 g/mol), 0.01% Triton X-100, pH 7.7\n#Sodium phosphate dibasic, 7-Hydrate (Na2HPO4.7H2O) FW 268.07\n#Sodium phosphat monobasic, monohydrate (NaH2PO4.H2O) FW 137.99\n\nclass Protocol\n\n  def main\n\n    operations.make\n    \n    show do\n            title \"Gather the Following Items:\"\n            check \"a 600 mL beaker\"\n            check \"10X PBS (pH 7.4)\"\n            check \"Sodium phosphate dibasic, 7-Hydrate (Na2HPO4.7H2O) FW 268.07 \"\n            check \"Sodium phosphate monobasic, monohydrate (NaH2PO4.H2O) FW 137.99\"\n            check \"Sodium chloride, NaCl\"\n            check \"Trition X-100\"\n    end\n    \n    show do\n            title \"Add following chemical reagents to the 600 mL beaker\"\n            check \"6.24 g of sodium phosphate dibasic, 7-Hydrate (Na2HPO4.7H2O)\"\n            check \"0.24 g of sodium phospate monobasic, monohydrate (NaH2PO4.H2O)\"\n            check \"1.46 g of NaCl\"\n            check \"300 mL of sterile DI water\"\n            note \"**If there is no sterile water, use DI water and then filter the buffer by a top-bottle filter in the final step of this protocol.**\"\n            check \"Using a serological pipette, add 50mL of 10X PBS to the beaker\"\n            check \"50 µl of Triton X-100\"\n            check \"Put one stir bar into the beaker and stir the buffer until the reagents are fully dissolved.\"\n    end\n    \n    show do\n            title \"pH value calibration\"\n            check \"Grab pH meter from the drawer.\"\n            check \"Grab three 50 mL Falcon tubes.\"\n            check \"Label the tubes with pH 4, pH 7 and pH 10.\"\n            check \"Grab pH standard solutions: pH 4 (red), pH 7 (yellow), pH 10 (blue).\"\n            check \"Distribute 45 mL of each pH standard solutions into three different tubes.\"\n            check \"Press \u003cb\u003eON/OFF\u003c/b\u003e button on the pH meter.\"\n            check \"Dip electrode about 2 cm into the pH 7 (yellow) standard buffer solution.\"\n            check \"Press the CAL button to enter calibration mode. The CAL indicator will be shown on the screen display.\"\n            check \"Allow about 30-40 seconds for the pH meter reading to stablize, then press the \u003cb\u003eHOLD/ENT\u003c/b\u003e button to confirm the first calibration point.\"\n            check \"Rinse electrode by DI water and wipe it dry with KimWipes.\"\n    end\n    \n    show do\n            title \"Second calibration point\"\n            check \"Dip electrode about 2 cm into the pH 4 (red) standard buffer solution.\"\n            check \"Press the CAL button to enter calibration mode. The CAL indicator will be shown on the screen display.\"\n            check \"Allow about 30-40 seconds for the pH meter reading to stablize, then press the \u003cb\u003eHOLD/ENT\u003c/b\u003e button to confirm the second calibration point.\"\n            check \"Rinse electrode by DI water and wipe it dry with KimWipes.\"\n    end \n    \n    show do\n            title \"Third calibration point\"\n            check \"Dip electrode about 2 cm into the pH 10 (blue) standard buffer solution.\"\n            check \"Press the CAL button to enter calibration mode. The CAL indicator will be shown on the screen display.\"\n            check \"Allow about 30-40 seconds for the pH meter reading to stablize, then press the \u003cb\u003eHOLD/ENT\u003c/b\u003e button to confirm the third calibration point.\"\n            check \"After the third point calibration, the meter will automatically return to the measurement mode.\"\n            check \"Rinse electrode by DI water and wipe it dry with KimWipes.\"\n    end\n    \n    show do\n            title \"pH value adjustment\"\n            check \"Dip electrode about 2 cm into the buffer in the 500 mL beaker.\"\n            check \"The pH value of the buffer should be around 7.7\"\n            check \"Adjust pH value to 7.7 by HCl or 5M NaOH if pH value is out of expecting range.\"\n            check \"Press \u003cb\u003eON/OFF\u003c/b\u003e to turn off the meter.\"\n            check \"Rinse electrode by DI water and wipe it dry with KimWipes.\"\n            check \"Return the meter and three standard buffers.\"\n    end\n    show do\n            title \"Label the bottle\"\n            check \"Fill the beaker with sterile DI water to the 500 mL-mark. Stir the buffer for 2 minutes.\"\n            check \"Grab a 500 mL bottle and label it with \u003cb\u003ePurification Buffer, your initials, the date\u003c/b\u003e\"\n            check \"Pour the prepared buffer to the bottle.\"\n            note \"If you are using non-sterile DI water, filter the buffer by a top-bottle filter in this step.\"\n            check \"Place the purification buffer in 4°C refrigerator(BO.110).\"\n    end\n    \n    show do\n            title \"Clean up\"\n            check \"Return chemical reagents.\"\n            check \"Place the used beaker and stir bar to the dishwashing area.\"\n    end\n    \n    \n    operations.store interactive: false\n    \n    return {}\n    \n  end\n\nend\n\n","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to prepare purification buffer for His-tagged protein purification workflow.\n\n- Steps:\n  - [01] Gather the chemical reagents.\n  - [02] Prepare the buffer according to the receipe.\n  - [03] Measure and adjust the pH value to 8.0\n  - [04] Keep the buffer in 4°C refrigerator.","test":"","timing":null}},{"sample_types":[{"id":82,"name":"Protein","description":"Protein","created_at":"2018-10-09T11:41:26.000-07:00","updated_at":"2018-10-09T11:41:26.000-07:00","field_types":[{"id":6524,"parent_id":82,"name":"Size","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2018-10-30T20:47:00.000-07:00","updated_at":"2018-10-30T20:47:00.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7070,"parent_id":82,"name":"Wash_Buffer","ftype":"number","choices":"5,10,15,30,0","array":false,"required":true,"created_at":"2018-11-30T14:46:57.000-08:00","updated_at":"2018-11-30T14:46:57.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":817,"name":"Laemmli Sample Buffer","description":"Protein sample for SDS-PAGE analysis","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:58:45.000-07:00","updated_at":"2019-03-17T19:12:15.000-07:00","unit":"Protein","cost":0.01,"release_method":"return","release_description":"","sample_type_id":82,"image":"","prefix":"M20","rows":null,"columns":null,"sample_type_name":"Protein"},{"id":818,"name":"12% SDS Gel in Coomassie Staining","description":"Protein stained by coomassie blue","min":0,"max":1,"handler":"collection","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:59:21.000-07:00","updated_at":"2018-10-30T18:52:33.000-07:00","unit":"Protein","cost":0.01,"release_method":"return","release_description":"","sample_type_id":82,"image":"","prefix":"","rows":1,"columns":3,"sample_type_name":"Protein"},{"id":820,"name":"12% SDS Gel in Tank","description":"For SDS-PAGE analysis","min":0,"max":100,"handler":"collection","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T21:16:39.000-07:00","updated_at":"2018-11-17T13:47:15.000-08:00","unit":"box","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":null,"image":"","prefix":"","rows":1,"columns":3,"sample_type_name":null}],"operation_type":{"name":"SDS-PAGE Analysis","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Before IPTG","sample_types":["Protein"],"object_types":["Laemmli Sample Buffer"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"input","name":"After IPTG","sample_types":["Protein"],"object_types":["Laemmli Sample Buffer"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"SDS Gel","sample_types":["Protein"],"object_types":["12% SDS Gel in Coomassie Staining"],"part":true,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"input","name":"Protein","sample_types":["Protein"],"object_types":["Laemmli Sample Buffer"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"input","name":"SDS Gel","sample_types":[null],"object_types":["12% SDS Gel in Tank"],"part":true,"array":false,"routing":"G","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\r\n\r\nneeds \"Standard Libs/Feedback\"\r\n\r\nclass Protocol\r\n  include Feedback\r\n  def main\r\n    \r\n    operations.retrieve\r\n\r\n    op_in_protein   = []\r\n    op_in_before    = []\r\n    op_in_after     = []\r\n    \r\n    amount_protein  = []\r\n    \r\n    op_count = 0\r\n    \r\n    operations.running.each do |op|\r\n        op.set_input_data(\"Protein\", :protein_concentration, Random.rand(0.1..3)) if debug\r\n        # \r\n        op_count = op_count + 1\r\n        op_in_protein   \u003c\u003c op.input(\"Protein\").item.id\r\n        op_in_before    \u003c\u003c op.input(\"Before IPTG\").item.id\r\n        op_in_after     \u003c\u003c op.input(\"After IPTG\").item.id\r\n        \r\n\r\n        tmp_protein = (2*20/(op.input_data(\"Protein\", :protein_concentration).to_f)).ceil # ul\r\n        if tmp_protein \u003c= 40\r\n            amount_protein \u003c\u003c 40\r\n        elsif tmp_protein \u003c= 60\r\n            amount_protein \u003c\u003c tmp_protein\r\n        else\r\n            amount_protein \u003c\u003c 60\r\n        end\r\n        \r\n    end\r\n\r\n    op_in_gel = operations.map { |op| op.input(\"SDS Gel\").collection.id }.uniq\r\n    \r\n    # Don't use generic operations.make\r\n    operations.each do |op|\r\n        op.output(\"SDS Gel\").make_part(\r\n          op.input(\"SDS Gel\").collection,\r\n          op.input(\"SDS Gel\").row,\r\n          op.input(\"SDS Gel\").column\r\n        )\r\n    end\r\n    \r\n    op_out_gel = operations.map { |op| op.output(\"SDS Gel\").collection.id }.uniq\r\n    \r\n    tank_count = (op_in_gel.size)/4.floor\r\n    remainder = (op_in_gel.size) % 4\r\n    if remainder != 0\r\n        tank_count = tank_count + 1\r\n    end\r\n\r\n    # Load samples into wells using a pipet with gel loading tips. [note] load samples slowly to allow them to settle evenly on the bottom of the well\r\n    # Arrange them in the following order:\r\n\r\n    #  -----------------------------------------------------------------------------------------\r\n    # | marker |         Batch 1          |         Batch 2          |         Batch 3          |\r\n    # | --------------------------------------------------------------------------------------- |\r\n    # | marker | Before | After  | Sample | Before | After  | Sample | Before | After  | Sample |\r\n    #  -----------------------------------------------------------------------------------------\r\n    \r\n    #  -----------------------------------------------------------------------------------------\r\n    # | Col 1  | Col 2  | Col 3  | Col 4  | Col 5  | Col 6  | Col 7  | Col 8  | Col 9  | Col 10 |\r\n    # | --------------------------------------------------------------------------------------- |\r\n    # | marker | ID_B1  | ID_A1  | ID_I1  | ID_B2  | ID_A2  | ID_I2  | ID_B3  | ID_A3  | ID_I3  |\r\n    #  -----------------------------------------------------------------------------------------\r\n    grab_lids(tank_count)\r\n    \r\n    load_marker(op_in_gel)\r\n    \r\n    load_sample_into_wells(op_count,op_in_protein,op_in_before,op_in_after,op_in_gel,amount_protein)\r\n\r\n    # Place the lid on the tank and make sure to align it with the color-coded plugs.\r\n    place_lid_and_align_to_plugs(op_in_protein,op_in_before,op_in_after)\r\n    \r\n    set_a_30mins_timer\r\n    \r\n    remove_gel_cassette(op_in_gel)\r\n    \r\n    # Remove the gels from the gel cassette by gently separating the two plates of the gel cassette.\r\n    gel_removal\r\n    \r\n    # Remove the gel by floating it off the plate, inverting the gel and plate under water.\r\n    \r\n    # Soak the gel in water and put the container on the shaker in the incubator.\r\n    gel_wash(op_in_gel)\r\n    \r\n    # Replace water with clean water every 5mins for three times.\r\n    second_wash(op_in_gel)\r\n    \r\n    final_wash_add_staining(op_in_gel)\r\n    \r\n    # Put the container on the shaker in incubator for 1hour.\r\n    put_container_on_shaker_1hr(op_in_gel)\r\n    \r\n    # Replace the water with clean water\r\n    remove_gel_stain(op_in_gel)\r\n    \r\n    background_wash(op_in_gel)\r\n    \r\n    operations.each do |op|\r\n        op.input(\"SDS Gel\").item.mark_as_deleted\r\n        op.output(\"SDS Gel\").child_item.move \"on the shaker in a still incubator\"\r\n      end\r\n   \r\n    operations.store\r\n    get_protocol_feedback\r\n\r\n    return {}\r\n  end\r\n  \r\n  def grab_lids(tank_count)\r\n    show do\r\n        title \"Set up the power supply\"\r\n        check \"In the gel room, obtain a power supply.\"\r\n        check \"Grab \u003cb\u003e#{tank_count}\u003c/b\u003e lid(s). Attach the electrodes of a lid to the power supply. Make sure to align the color-coded plugs and jacks (black to black / red to red).\"\r\n        image \"Actions/ProteinPurification/lid.jpg\"\r\n    end\r\n  end\r\n  \r\n  def load_marker(op_in_gel)\r\n    show do\r\n        title \"Add protein ladder to gel\"\r\n        check \"Grab the protein ladder from a box label \u003cb\u003eprotein purification\u003c/b\u003e in -20°C freezer (B1-165).\"\r\n        check \"Pipette 10 µl of the protein ladder to well position 1 (the leftmost well) of gel #{op_in_gel.to_sentence}.\"\r\n    end\r\n  end\r\n\r\n  def load_sample_into_wells(op_count,op_in_protein,op_in_before,op_in_after,op_in_gel,amount_protein)\r\n    show do \r\n      title \"Load sample into gel\"\r\n      check \"Grab a P200 pipettor and a box of gel loading tip.\"\r\n      check \"Load samples to the gel according to the table:\"\r\n      note \"Load the sample slowly to allow it to settle evenly on the bottom of the well. Be careful not to puncture the bottom of gel wells.\"\r\n      for i in 0...op_in_gel.size\r\n        #note \"Gel ID: #{op_in_gel[i]}\"\r\n        op_table = [[\"Gel ID\",\"Well number\",\"Sample ID\",\"Loading amount\"]]\r\n        well_no = 2\r\n        if (i+1)*3 \u003e op_count\r\n            length = op_count - (i*3)\r\n        else\r\n            length = 3\r\n        end\r\n        for j in 0...length\r\n            # before\r\n            row = []\r\n            row \u003c\u003c op_in_gel[i]\r\n            row \u003c\u003c well_no\r\n            row \u003c\u003c {content:op_in_before[i*3+j], check: true}\r\n            row \u003c\u003c \"40 µl\"\r\n            op_table \u003c\u003c row\r\n            well_no = well_no + 1\r\n            # after\r\n            row = []\r\n            row \u003c\u003c op_in_gel[i]\r\n            row \u003c\u003c well_no\r\n            row \u003c\u003c {content:op_in_after[i*3+j], check: true}\r\n            row \u003c\u003c \"40 µl\"\r\n            op_table \u003c\u003c row\r\n            well_no = well_no + 1\r\n            # sample\r\n            row = []\r\n            row \u003c\u003c op_in_gel[i]\r\n            row \u003c\u003c well_no\r\n            row \u003c\u003c {content:op_in_protein[i*3+j], check: true}\r\n            row \u003c\u003c \"#{amount_protein[i*3+j]} µl\"\r\n            op_table \u003c\u003c row\r\n            well_no = well_no + 1\r\n        end\r\n        table op_table\r\n      end\r\n      check \"If there is an empty well, load 10 µl of sample buffer into each empty well to avoid lateral diffusion.\"\r\n      image \"Actions/ProteinPurification/loading_tip.jpg\"\r\n    end\r\n  end\r\n    \r\n  def place_lid_and_align_to_plugs(op_in_protein,op_in_before,op_in_after)\r\n    show do \r\n      title \"Start Electrophoresis\"\r\n      check \"Attach the lid to tank. Make sure that the red electrode attaches to the red terminal of the power supply, and the black \r\n      electrode attaches to the neighboring black terminal (as shown in the picture).\"\r\n      check \"Set the power supply to 80 V.\"\r\n      check \"Set a 20-min timer and hit the RUN button to start.\"\r\n      check \"while waiting, return the protein ladder, sample buffer, P200 pipettor and gel loading tip box.\"\r\n      image \"Actions/ProteinPurification/Start_Electrophoresis.jpg\"\r\n    end\r\n  end\r\n  \r\n  def set_a_30mins_timer\r\n      show do\r\n        title \"Electrophoresis\"\r\n        check \"Set the power supply to 150 V.\"\r\n        check \"Set a 50-mins timer and hit the RUN button to start.\"\r\n        check \"Check on gels with a manager.\"\r\n        bullet \"If the protein ladder is fully separated and the green marker/blue line sits on the bottom of a gel, proceed to the next step.\"\r\n        bullet \"If not, the lab manager may have you set another timer.\"\r\n      end\r\n  end\r\n  \r\n  def remove_gel_cassette(op_in_gel)\r\n    show do \r\n        title \"Remove gel cassette\"\r\n        check \"Turn off the power supply.\"\r\n        check \"Remove the tank lid.\"\r\n        check \"Pour off the running buffer into the sink.\"\r\n        check \"Grab \u003cb\u003e#{op_in_gel.size}\u003c/b\u003e box(es) and label with ID: #{op_in_gel.to_sentence}.\"\r\n        check \"Fill the box half full of DI water.\"\r\n        check \"Open the arms of assembly and release the gel cassette.\"\r\n        check \"Place the gel cassette into the corresponding box (as shown in the picture).\"\r\n        image \"Actions/ProteinPurification/empty_box.jpg\"\r\n    end\r\n  end\r\n\r\n  def gel_removal\r\n    show do \r\n      title \"Remove gel from the glass cassette\"\r\n      check \"Grab a gel releaser.\"\r\n      check \"Gently separate the two plates of a gel cassette by using a gel releaser. (as shown in the picture 1)\"\r\n      check \"Remove the short plate on the top.\"\r\n      check \"Cut away the top layer of gel by using a gel releaser. (as shown in the picture 2)\"\r\n      check \"Inverting the glass plate under water. Floating the gel off the plate in the corresponding box.\"\r\n      image \"Actions/ProteinPurification/gel_releaser.jpg\"\r\n    end\r\n  end\r\n\r\n  def gel_wash(op_in_gel)\r\n    show do \r\n      title \"Wash gels\"\r\n      check \"Place #{op_in_gel.to_sentence} on the shaker in a still incubator.\"\r\n      check \"Wash gels at 300 rpm for 5 minutes.\"\r\n      timer initial: { hours: 0, minutes: 5, seconds: 0}\r\n      check \"While waiting, clean up the glass plates, running tanks and the gel releaser by rinsing with water.\"\r\n      check \"Remove the dot stickers on clamping frames and wash it by rinsing with water.\"\r\n      check \"Return the lids.\"\r\n      image \"Actions/ProteinPurification/shaker_in_incubator.jpg\"\r\n    end\r\n  end\r\n    \r\n  def second_wash(op_in_gel)\r\n    show do \r\n      title \"Second wash\"\r\n      check \"Retrieve #{op_in_gel.to_sentence} from shaker.\"\r\n      check \"Pour off water and fill the box half full of DI water.\"\r\n      check \"Return #{op_in_gel.to_sentence} to the shaker in a still incubator.\"\r\n      check \"Wash gels at 300 rpm for 5 minutes.\"\r\n      timer initial: { hours: 0, minutes: 5, seconds: 0}\r\n    end\r\n  end\r\n  \r\n  def final_wash_add_staining(op_in_gel)\r\n    show do\r\n        title \"Stain gels\"\r\n        check \"Retrieve #{op_in_gel.to_sentence} from shaker.\"\r\n        check \"Pour off water.\"\r\n        check \"Grab a motorized pipet.\"\r\n        check \"Grab a gel staining buffer from 4°C refrigerator (R1-350).\"\r\n        check \"Add 20 mL of gel staining buffer to each box.\"\r\n        check \"Return the gel staining buffer.\"\r\n        image \"Actions/ProteinPurification/gel_staining_buffer.jpg\"\r\n    end\r\n  end\r\n\r\n  def put_container_on_shaker_1hr(op_in_gel)\r\n    show do \r\n      title \"Stain gels\"\r\n      check \"Place #{op_in_gel.to_sentence} on the shaker in a still incubator.\"\r\n      check \"Stain gel at 150 rpm for 1 hour.\"\r\n      timer initial: { hours: 1, minutes: 0, seconds: 0}\r\n    end\r\n  end\r\n\r\n  def remove_gel_stain(op_in_gel)\r\n    show do \r\n      title \"Remove gel staining buffer\"\r\n      check \"Retrieve #{op_in_gel.to_sentence} from the shaker.\"\r\n      check \"Pour off gel staining buffer.\"\r\n      check \"Rinse gels with water twice.\"\r\n      check \"Fill the box half full of DI water.\"\r\n    end\r\n  end\r\n  \r\n  def background_wash(op_in_gel)\r\n    show do\r\n        title \"Destain gels \"\r\n        check \"Place #{op_in_gel.to_sentence} on a shaker in the still incubator.\"\r\n        check \"Wash gels at 300 rpm for 30 minutes.\"\r\n        timer initial: { hours: 0, minutes: 30, seconds: 0}\r\n    end\r\n    \r\n    show do\r\n        title \"Destain gels \"\r\n        check \"Retrieve #{op_in_gel.to_sentence} from the shaker.\"\r\n        check \"Pour off water and fill the box half full of DI water.\"\r\n        check \"Place gel box on shaker in a still incubator.\"\r\n        check \"Wash gel overnight.\"\r\n    end\r\n  end\r\n  \r\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to analyze proteins in a sample by electrophoresis. \n\n- Workflow:\n  - SDS-PAGE Gel Casting \u003e *SDS-PAGE Analysis* \u003e Scan Gel\n- Steps:\n  - [01] Grab the samples which are prepared by the protocol \"SDS-PAGE Sample Preparation\".\n  - [02] Load samples into wells using a loading tip.\n    \n| Well 01       | Well 02              | Well 03             | Well 04                              |\n| --------------| ---------------------| --------------------| -------------------------------------|\n| Protein ladder| Sample 01            | Sample 02           | Sample 03                            |\n|               | Before IPTG induction| After IPTG induction| Protein Sample (Concentrated protein)|\n    \n  - [03] Attach the lid to the tank and start electrophoresis.\n  - [04] Run gel until the protein ladder is fully separated.\n  - [05] Remove gel from the glass cassette and wash the gel for three times with clean water.\n  - [06] Stain gel with gel staining buffer for 1 hour.\n  - [07] Destain gel with clean until the gel matrix background is clear.","test":"","timing":null}},{"sample_types":[],"object_types":[{"id":820,"name":"12% SDS Gel in Tank","description":"For SDS-PAGE analysis","min":0,"max":100,"handler":"collection","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T21:16:39.000-07:00","updated_at":"2018-11-17T13:47:15.000-08:00","unit":"box","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":null,"image":"","prefix":"","rows":1,"columns":3,"sample_type_name":null}],"operation_type":{"name":"SDS-PAGE Gel Casting","category":"Protein Purification","deployed":false,"on_the_fly":true,"field_types":[{"ftype":"sample","role":"output","name":"SDS Gel","sample_types":[null],"object_types":["12% SDS Gel in Tank"],"part":true,"array":false,"routing":"G","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\n\nneeds \"Standard Libs/Feedback\"\n\nclass Protocol\n  include Feedback\n  def main\n    op_count = operations.size\n\n    # 1 batch           -\u003e 3 inputs: before, after, iptg\n    # 1 gel             -\u003e max. 3 batches [marker, batch1, batch2, batch3]\n    # 1 clamping frame  -\u003e max. 2 gels\n    # 1 tank            -\u003e max. 2 frames\n    \n    gel_count = (op_count/3).floor\n    remainder = op_count % 3\n    if remainder != 0\n        gel_count = gel_count + 1\n    end\n    \n    before = operations.size\n    \n    operations.make\n    \n    op_out_gel = []\n    operations.output_collections[\"SDS Gel\"].each do |op_collection|\n        op_out_gel \u003c\u003c op_collection.id\n    end\n    \n    clamping_frame_count = (op_count/6).floor\n    remainder = op_count % 6\n    if remainder != 0\n        clamping_frame_count = clamping_frame_count + 1\n    end\n    \n    running_buffer=0\n    water=0\n    for i in 1..clamping_frame_count\n        if i%2 == 0\n            running_buffer = running_buffer + 20\n            water = 10*running_buffer - 20\n        else\n            running_buffer = running_buffer + 80\n            water = 10*running_buffer - 80\n        end\n    end\n    \n    tank_count = (op_count/12).floor\n    remainder = op_count % 12\n    if remainder != 0\n        tank_count = tank_count + 1\n    end\n    \n    # Place the casting frame at upright coner with the pressure cams in the open position and facing to a flat surface.\n    place_casting_frame(gel_count,clamping_frame_count)\n        \n    # Slide the two glass plates into the casting frame, keeping the short plate facing to front of the frame.\n    place_short_plate_slide\n        \n    # Assemble the casting frame on the casting stand.\n    place_assemble_frame_into_stand(clamping_frame_count)\n        \n    # Load water into glass cassette sandwich for testing leaking.\n    test_leaking\n    \n    # - Add 0.01g APS powder to 100uL water\n    prepare_aps_solution(gel_count)\n    \n    \n    # Prepare 12% resolving gel\n    prepare_resolving_gel(gel_count)\n    \n    # Add 2mL isopropanol on the top of the gel buffer in the gel cassette sandwich.\n    wait_for_1h\n        \n    # Prepare one 10% stacking gel\n    prepare_stacking_gel(gel_count)\n     \n    set_timer_30mins\n    \n    place_gel_into_clamping(clamping_frame_count)\n    \n    place_frames_into_tank(tank_count,clamping_frame_count)\n    \n    running_buffer_preparation(running_buffer,water)   \n    \n    pour_running_buffer\n    \n    label_gel_id(op_out_gel)\n    \n    clean_up\n    \n    operations.store\n    get_protocol_feedback\n\n    return {}\n  end\n  \n  def place_casting_frame(gel_count,clamping_frame_count)\n    show do\n       title \"Glass cassette preparation\"\n       check \"Grab the following items:\"\n       note \"#{gel_count} short plate\"\n       note \"#{gel_count} spacer plate\"\n       note \"#{gel_count} comb\"\n       note \"#{gel_count} casting frame\"\n       #bullet \"#{clamping_frame_count} casting stand\"\n       note \"#{gel_count} gray foam gasket\"\n       check \"Make sure the glass plates and comb are dry and clean. If not, spray ethanol on them and wipe them dry with Kimwipes.\"\n       image \"Actions/ProteinPurification/casting_tool.jpg\"\n    end\n  end\n\n  def place_short_plate_slide\n    show do\n       title \"Assemble glass cassette sandwich\"\n       check \"Grab a spacer plate and place a short plate on top of it (as shown in the picture 1).\"\n       check \"Place a casting frame upright with the pressure cams in the open position.\"\n       check \"Slide glass plates into the casting frame (as shown in the picture 2)\"\n       check \"Push plates vertically to the benchtop. Make sure both plates are flush at bottom.\"\n       check \"Engage pressure cams to secure the glass cassette in the casting frame (as shown in the picture 3).\"\n       check \"Make sure the short plate is facing to front of the frame and the labeling on the spacer plate is up.\"\n       check \"To avoid leakage, put one finger at the bottom of plates and slide the finger to check both plates are flush at bottom.\"\n       check \"Repeat the steps above until all glass cassette sandwiches are assembled.\"\n       image \"Actions/ProteinPurification/casting_frame.jpg\"\n    end\n  end\n    \n  def place_assemble_frame_into_stand(clamping_frame_count)\n    show do\n        title \"Casting stand assembly\" \n        check \"Grab \u003cb\u003e#{clamping_frame_count}\u003c/b\u003e casting stand(s) (as shown in the picture 1).\"\n        check \"Place the gray foam gasket on the casting stand (as shown in the picture 2).\"\n        check \"Clamp casting frame on casting stand (as shown in the picture 3).\"\n        image \"Actions/ProteinPurification/casting_stand_new.jpg\"\n    end\n  end\n    \n  def test_leaking\n    show do\n       title \"Leak testing\"\n       check \"Grab a motorized pipet.\"\n       check \"Pipet 10 mL of water into the glass cassette sandwich.\"\n       check \"Wait for 2 minutes. Check for leaks\"\n        timer initial: { hours: 0, minutes: 2, seconds: 0}\n       bullet \"If there is a leakage, wipe glass plates dry. Reassemble glass plates and make sure plates are flush at bottom.\"\n       bullet \"If there is no leakage, proceed to the next step.\"\n       check \"Remove water from glass cassette sandwich. Pour water to sink.\"\n       check \"Hold the casting stand upside down and remove remaining water in glass cassette with paper towel.\"\n    end\n  end\n  \n  def prepare_aps_solution(gel_count)\n    show do\n       title \"Prepare 10% Ammonium persulfate solution\"\n       check \"Grab a 1.5 mL tube and label with APS\"\n       check \"Weigh #{gel_count*0.02} g of APS powder on a weighing paper and add the powder into the 1.5 mL tube.\"\n       check \"Pipette #{gel_count*200} µl water into the tube.\"\n       check \"Vortex until the powder is fully dissolved.\"\n       image \"Actions/ProteinPurification/APS.jpg\"\n    end\n  end\n  \n  def prepare_resolving_gel(gel_count)\n    op_table = [[\" Order \",\" Reagent \",\" Volume \"],\n    [\"1\",{content:\"Water\", check: true},\"#{gel_count*3.4} mL\"],\n    [\"2\",{content:\"Acrylamide\", check: true},\"#{gel_count*4} mL\"],\n    [\"3\",{content:\"Resolving gel buffer\", check: true},\"#{gel_count*2.5} mL\"],\n    [\"4\",{content:\"10% SDS buffer\", check: true},\"#{gel_count*100} µl\"],\n    [\"5\",{content:\"APS\", check: true},\"#{gel_count*100} µl\"],\n    [\"6\",{content:\"TEMED\", check: true},\"#{gel_count*10} µl\"],\n    [\"\",\"Total volume\",\"#{gel_count*10} mL\"]\n    ]\n\n    show do\n        title \"Gel solution preparation\"\n        note  \"Gather the following items\"\n        check \"DI water\"\n        check \"Resolving gel buffer\"\n        check \"TEMED\"\n        check \"Acrylamide (in 4°C refrigerator)\"\n        check \"10% SDS buffer\"\n        check \"APS solution (just fresh prepared)\"\n        check \"a 50 mL falcon tube\"\n        check \"Isopropanol\"\n        check \"motorized pipet and a 10 mL serological pipette.\"\n    end\n    \n    show do\n        title \"Prepare 12% resolving gel solution\"\n        note \"Prepare a gel solution in the Falcon tube according to the table. Order is important.\"\n        table op_table\n        image \"Actions/ProteinPurification/resolving_buffer.jpg\"\n    end\n    \n    show do\n        title \"Resolving gel casting\"\n        warning \"Perform the following steps as quickly as possible. Gel solution turns solid in a short time.\"\n        check \"Pipette up and down three times by using a motorized pipet.\"\n        check \"Load 7.5 mL of gel solution to each gel cassette sandwich. Avoid air bubbles.\"\n        check \"Gently pipette 2 mL of isopropanol into glass cassette from left to right. Avoid to disturb the gel solution.\"\n    end\n  end\n\n  def wait_for_1h\n    show do\n       title \"Resolving gel polymerization\"\n       check \"Set a 1-hr timer.\"\n       timer initial: { hours: 1, minutes: 0, seconds: 0}\n       check \"While waiting, return the resolving gel buffer and isopropanol. Keep other reagents for later use.\"\n       check \"When the timer is up, pour off isopropanol into the sink. Remove remaining isopropanol with paper towel.\"\n    end\n  end         \n  \n  def prepare_stacking_gel(gel_count)\n    op_table = [[\" Order \",\" Reagent \",\" Volume \"],\n    [\"1\",{content:\"Water\", check: true},\"#{gel_count*2.05} mL\"],\n    [\"2\",{content:\"Acrylamide\", check: true},\"#{gel_count*1.65} mL\"],\n    [\"3\",{content:\"Stacking gel buffer\", check: true},\"#{gel_count*1.25} mL\"],\n    [\"4\",{content:\"10% SDS buffer\", check: true},\"#{gel_count*50} µl\"],\n    [\"5\",{content:\"APS\", check: true},\"#{gel_count*25} µl\"],\n    [\"6\",{content:\"TEMED\", check: true},\"#{gel_count*5} µl\"],\n    [\"\",\"Total volume\",\"#{gel_count*5} mL\"]\n    ]\n    \n    show do\n        title \"Prepare stacking gel solution\"\n        check \"Grab a 50 mL falcon tube, motorized pipet and a 10 mL serological pipette.\"\n        check \"Grab stacking gel buffer.\"\n        note \"Prepare a gel solution in the Falcon tube according to the table. Order is important.\"\n        table op_table\n    end\n    \n    show do\n    title \"Stacking gel casting\"\n        warning \"Perform the following steps as quickly as possible. Gel solution turns solid in a short time.\"\n        check \"Pipette up and down three times by using a motorized pipet.\"\n        check \"Gently load 2.5 mL of gel solution to each gel cassette sandwich. Avoid air bubbles.\"\n        check \"Insert a comb into the gel cassette (as shown in the picture).\"\n        image \"Actions/ProteinPurification/stacking_buffer_and_comb.jpg\"\n    end\n  end\n\n  def set_timer_30mins\n    show do\n        title \"Stacking gel polymerization\"\n        bullet \"Set a 40-mins timer.\" \n        timer initial: { hours: 0, minutes: 40, seconds: 0}\n        check \"While waiting, return all the reagents. Discard the APS solution.\"\n    end\n  end\n  \n  def place_gel_into_clamping(clamping_frame_count)\n    show do\n        title \"Electrode assembly\"\n        check \"Gently remove the comb from the gel cassette.\"\n        check \"Grab \u003cb\u003e#{clamping_frame_count}\u003c/b\u003e clamping frame(s).\"\n        check \"Set the clamping frame to the green arms open position. Make sure the red marking is on your left (as shown in the picture 1).\"\n        check \"Release the glass cassette from the casting frame.\"\n        check \"Place a gel sandwich into the front side of the clamping frame with the short plate facing inward (as shown in picture 2).\"\n        note \"**If an odd number of gels is being run, make sure to use a buffer dam.**\"\n        check \"Make sure the glass cassettes are sitting on the bottom notches of the clamping frame. Lock gel cassettes by sliding the green arms of the clamping frame over the gels (as shown in picture 3).\"\n        image \"Actions/ProteinPurification/clamping_frame.jpg\"\n    end\n  end\n\n  def place_frames_into_tank(tank_count,clamping_frame_count)\n    show do\n        title \"Gel tank preparation\"\n        check \"Grab \u003cb\u003e#{tank_count}\u003c/b\u003e gel running tank(s).\"\n        check \"Make sure the red marking on the top inside edge of tank is on your left (as shown in the picture 1).\"\n        check \"Place the electrode assembly into the gel running tank. Make sure the red electrode is matching with the red marking on the gel running tank (as shown in the picture 2).\"\n        image \"Actions/ProteinPurification/running_tank.jpg\"\n    end  \n  end\n  \n  def running_buffer_preparation(running_buffer,water)\n    show do\n        title \"Running buffer preparation\"\n        check \"Grab a beaker and cylinder.\"\n        check \"Add #{water} mL of DI water to the beaker.\"\n        check \"Add #{running_buffer} mL of premixed 10x Tris/glycine/SDS running buffer to the beaker.\"\n        check \"Stir for 2 minutes.\"\n        timer initial: { hours: 0, minutes: 2, seconds: 0}\n        image \"Actions/ProteinPurification/running_buffer.jpg\"\n    end\n  end\n  \n  def pour_running_buffer\n    show do\n        title \"Fill tank with Running buffer\"\n        check \"Place the gel running tank near to the power supply in the gel room.\"\n        check \"Fill \u003cb\u003eup chamber\u003c/b\u003e with running buffer to the brim (as shown in the picture 1).\"\n        check \"Wait for 2 minutes. Check for leaks.\" \n        timer initial: { hours: 0, minutes: 2, seconds: 0}\n        bullet \"If there is a leakage, pour running buffer back to the beaker. Open the green arms of clamping frame and then reassemble glass plates on the clamping frame.\"\n        bullet \"If not, proceed to the next step.\"\n        check \"Fill the \u003cb\u003elower chamber\u003c/b\u003e with running buffer to the indicated level. (2-Gels or 4-Gels line markings on the running gel tank, as shown in the picture 2)\"\n        image \"Actions/ProteinPurification/leaking_check.jpg\"\n    end\n  end\n  \n  def label_gel_id(op_out_gel)\n    show do \n        title \"Label gel ID\"\n        check \"Write ID: #{op_out_gel.to_sentence} on dot stickers.\"\n        check \"Affix the label on clamping frame. (as shown in the picture)\"\n        image \"Actions/ProteinPurification/dot_label.jpg\"\n    end\n  end\n  \n  def clean_up\n    show do\n        title \"Clean up\"\n        check \"Clean up combs, casting frames, casting stands and gray foam gaskets by rinsing with water.\"\n        check \"Discard all used Falcon tubes and 1.5 mL tubes.\"\n        check \"Return the motorized pipet.\"\n    end\n  end\n\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to cast a gel for SDS-PAGE analysis.\r\n\r\n- Workflow:\r\n  - *SDS-PAGE Gel Casting* \u003e SDS-PAGE Analysis\r\n- Steps:\r\n  - [01] Grab a short plate, spacer plate, casting frame, comb, clamping frame, gel running tank and casting stand with gray foam gasket.\r\n  - [02] Slide two glass plates into the casting frame and engage the presssure cams to secure the glasses in the casting frame.\r\n  - [03] Assemble the casting frame on the casting stand.\r\n  - [04] Load water to the glass cassette sandwich and Check it with leakage.\r\n  - [05] Pour off water and prepare 12% resolving gel solution.\r\n  - [06] Load resolving gel solution into the glass cassette and overlay isopropanol.\r\n  - [07] Wait for 1 hour and pour off isopropanol.\r\n  - [08] Prepare 10% stacking gel solution and Load it to the glass cassette.\r\n  - [09] Insert a comb and wait for 30 minutes.\r\n  - [10] Remove the comb and release glass cassette from the casting frame.\r\n  - [11] Slide the glass cassette into clamping frame and lock it into place.\r\n  - [12] Place the clamping frame assembly into the gel running tank.\r\n  - [13] Prepare running buffer and fill the gel running tank with running buffer.","test":"","timing":null}},{"sample_types":[{"id":2,"name":"Plasmid","description":"A circular piece of double stranded DNA","created_at":"2013-10-15T09:59:25.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":4,"parent_id":2,"name":"Sequence","ftype":"url","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:30:08.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5,"parent_id":2,"name":"Sequence Verification","ftype":"url","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":6,"parent_id":2,"name":"Bacterial Marker","ftype":"string","choices":"Amp,Kan,Amp + Kan,Spec,Kan + Spec,Chlor,Tet,NA,Other","array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-12-27T11:26:31.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7,"parent_id":2,"name":"Yeast Marker","ftype":"string","choices":"HIS,TRP,URA,LEU,NatMX,KanMX,HygMX,BleoMX,5FOA,NA,Other","array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2017-02-13T10:49:58.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":27,"field_type_id":7,"sample_type_id":1,"object_type_id":null,"created_at":"2017-02-13T10:49:58.000-08:00","updated_at":"2017-02-13T10:49:58.000-08:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":8,"parent_id":2,"name":"Length","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:16:33.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":42,"parent_id":2,"name":"Sequencing Primers","ftype":"sample","choices":null,"array":true,"required":false,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":26,"field_type_id":42,"sample_type_id":1,"object_type_id":null,"created_at":"2016-05-09T21:30:48.000-07:00","updated_at":"2016-05-09T21:30:48.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":46,"parent_id":2,"name":"QC Primer1","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":29,"field_type_id":46,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":47,"parent_id":2,"name":"QC Primer2","ftype":"sample","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[{"id":30,"field_type_id":47,"sample_type_id":1,"object_type_id":null,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","sample_type":{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00"}}],"sample_types":["Primer"],"object_types":[null]},{"id":48,"parent_id":2,"name":"QC_length","ftype":"number","choices":null,"array":false,"required":false,"created_at":"2017-05-24T14:51:40.000-07:00","updated_at":"2017-05-24T14:51:40.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":5816,"parent_id":2,"name":"Transformation Temperature","ftype":"number","choices":"37,30","array":false,"required":false,"created_at":"2018-09-17T15:02:22.000-07:00","updated_at":"2018-11-06T11:31:23.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":1,"name":"Primer","description":"A short double stranded piece of DNA for PCR and sequencing","created_at":"2013-10-08T10:18:01.000-07:00","updated_at":"2015-11-29T07:55:20.000-08:00","field_types":[{"id":1,"parent_id":1,"name":"Overhang Sequence","ftype":"string","choices":null,"array":false,"required":false,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":2,"parent_id":1,"name":"Anneal Sequence","ftype":"string","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":3,"parent_id":1,"name":"T Anneal","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2016-05-09T20:40:31.000-07:00","updated_at":"2016-05-09T21:25:11.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]},{"id":82,"name":"Protein","description":"Protein","created_at":"2018-10-09T11:41:26.000-07:00","updated_at":"2018-10-09T11:41:26.000-07:00","field_types":[{"id":6524,"parent_id":82,"name":"Size","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2018-10-30T20:47:00.000-07:00","updated_at":"2018-10-30T20:47:00.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7070,"parent_id":82,"name":"Wash_Buffer","ftype":"number","choices":"5,10,15,30,0","array":false,"required":true,"created_at":"2018-11-30T14:46:57.000-08:00","updated_at":"2018-11-30T14:46:57.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":819,"name":"Overexpression of Plasmid","description":"E. coli transformed with a plasmid in TB + antibiotic and induced by IPTG","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T20:57:28.000-07:00","updated_at":"2019-03-17T19:12:46.000-07:00","unit":"Plasmid","cost":0.01,"release_method":"dispose","release_description":"","sample_type_id":2,"image":"","prefix":"M20","rows":null,"columns":null,"sample_type_name":"Plasmid"},{"id":817,"name":"Laemmli Sample Buffer","description":"Protein sample for SDS-PAGE analysis","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:58:45.000-07:00","updated_at":"2019-03-17T19:12:15.000-07:00","unit":"Protein","cost":0.01,"release_method":"return","release_description":"","sample_type_id":82,"image":"","prefix":"M20","rows":null,"columns":null,"sample_type_name":"Protein"},{"id":814,"name":"Concentrated Protein","description":"Concentrated protein elution in the concentrator","min":0,"max":1,"handler":"sample_container","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:53:05.000-07:00","updated_at":"2018-11-27T08:39:21.000-08:00","unit":"Protein","cost":0.01,"release_method":"return","release_description":"","sample_type_id":82,"image":"","prefix":"M20","rows":null,"columns":null,"sample_type_name":"Protein"}],"operation_type":{"name":"SDS-PAGE Sample Preparation","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"Before IPTG","sample_types":["Plasmid"],"object_types":["Overexpression of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":613,"preferred_field_type_id":6891,"choices":null},{"ftype":"sample","role":"input","name":"After IPTG","sample_types":["Plasmid"],"object_types":["Overexpression of Plasmid"],"part":false,"array":false,"routing":"P","preferred_operation_type_id":613,"preferred_field_type_id":6891,"choices":null},{"ftype":"sample","role":"output","name":"Before IPTG","sample_types":["Protein"],"object_types":["Laemmli Sample Buffer"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"After IPTG","sample_types":["Protein"],"object_types":["Laemmli Sample Buffer"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"input","name":"Protein","sample_types":["Protein"],"object_types":["Concentrated Protein"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null},{"ftype":"sample","role":"output","name":"Protein","sample_types":["Protein"],"object_types":["Laemmli Sample Buffer"],"part":false,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\r\n\r\nneeds \"Standard Libs/Feedback\"\r\n\r\nclass Protocol\r\n  include Feedback\r\n  def main\r\n\r\n    operations.retrieve.make\r\n    \r\n    # Gather all reserved sample: \r\n    # - sample 01: before IPTG induction with design ID\r\n    # - sample 02: after IPTG induction with design ID\r\n    # - sample 03: purified protein\r\n    \r\n    op_in_protein   = []\r\n    op_in_before    = []\r\n    op_in_after     = []\r\n    op_out_protein  = []\r\n    op_out_before   = []\r\n    op_out_after    = []\r\n    \r\n    lysis_before      = []\r\n    lysis_after       = []\r\n    amount_protein    = []\r\n    \r\n    op_count = 0\r\n    \r\n    operations.running.each do |op|\r\n        op.set_input_data(\"Before IPTG\", :od_value, Random.rand(0.8..1.0)) if debug\r\n        op.set_input_data(\"After IPTG\", :od_value, Random.rand(0.8..1.0)) if debug\r\n        op.set_input_data(\"Protein\", :protein_concentration, Random.rand(0.01..3)) if debug\r\n\r\n        op_count = op_count + 1\r\n        op_in_protein   \u003c\u003c op.input(\"Protein\").item.id\r\n        op_in_before    \u003c\u003c op.input(\"Before IPTG\").item.id\r\n        op_in_after     \u003c\u003c op.input(\"After IPTG\").item.id\r\n        op_out_protein  \u003c\u003c op.output(\"Protein\").item.id\r\n        op_out_before   \u003c\u003c op.output(\"Before IPTG\").item.id\r\n        op_out_after    \u003c\u003c op.output(\"After IPTG\").item.id\r\n        \r\n        tmp_before  = (op.input_data(\"Before IPTG\", :od_value).to_f * 100).floor\r\n        tmp_after   = (op.input_data(\"After IPTG\", :od_value).to_f * 100).floor\r\n        # to get 0.01mg from sample, the amount is 0.01(mg)*1000(ul/mL)/protein_concetration(mg/mL)\r\n        tmp_protein = (20*3.5/(op.input_data(\"Protein\", :protein_concentration).to_f)).round(1) # ul\r\n        \r\n        # Record the input (Concentrated Protein) protein concentration to output (Laemmli Sample Buffer).\r\n        protein_out = op.output(\"Protein\").item\r\n        protein_out.associate :protein_concentration, op.input_data(\"Protein\", :protein_concentration).to_f\r\n        \r\n        lysis_before   \u003c\u003c tmp_before\r\n        lysis_after    \u003c\u003c tmp_after\r\n        amount_protein  \u003c\u003c tmp_protein  # ul\r\n        \r\n    end\r\n\r\n    # Preheat the heat plate to 98°C.\r\n    sample_preparation(op_in_protein,op_in_before,op_in_after)\r\n    \r\n    add_lysis(op_count,op_in_before,op_in_after,lysis_before,lysis_after)\r\n    \r\n    grab_tubes(op_count,op_in_before,op_in_after,op_in_protein,op_out_protein,op_out_before,op_out_after,amount_protein)\r\n    \r\n    operations.each do |op|\r\n        op.input(\"Before IPTG\").item.mark_as_deleted\r\n        op.input(\"After IPTG\").item.mark_as_deleted\r\n    end\r\n    \r\n    operations.store\r\n    \r\n    clean_up\r\n     \r\n    get_protocol_feedback\r\n\r\n    return {}\r\n\r\n  end\r\n\r\n  def sample_preparation(op_in_protein,op_in_before,op_in_after)\r\n    show do\r\n        title \"Set up a heat block\"\r\n        check \"Set a heat block to 98°C.\"\r\n        check \"Grab a ice block.\"\r\n        check \"Place #{op_in_protein.to_sentence} on ice block.\"\r\n    end\r\n  end\r\n\r\n  \r\n  def add_lysis(op_count,op_in_before,op_in_after,lysis_before,lysis_after)\r\n    op_table = [[\"Sample stock ID\",\"Lysis Buffer Volume (µl)\"]]\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c {content:op_in_before[i], check: true}\r\n        row \u003c\u003c lysis_before[i]\r\n        op_table \u003c\u003c row\r\n        row = []\r\n        row \u003c\u003c {content:op_in_after[i], check: true}\r\n        row \u003c\u003c lysis_after[i]\r\n        op_table \u003c\u003c row\r\n    end\r\n    show do\r\n        title \"Suspend cell pellet in lysis buffer\"\r\n        #\"Formula: lysis buffer(uL) = OD value* 100 uL lysis buffer.\"\r\n        check \"Grab the lysis buffer from 4°C refrigerator.\"\r\n        check \"Add lysis buffer to tubes according to the table.\"\r\n        table op_table\r\n        check \"Vortex samples for 10 seconds or until no clumps of cell pellet.\"\r\n        check \"Return the lysis buffer to 4°C refrigerator.\"\r\n    end\r\n  end\r\n  \r\n  \r\n  def grab_tubes(op_count,op_in_before,op_in_after,op_in_protein,op_out_protein,op_out_before,op_out_after,amount_protein)\r\n    op_table_2 = [[\"Tube ID\",\"Volume\"]]\r\n    add_amount = []\r\n    for i in 0..(op_count-1)\r\n        row = []\r\n        row \u003c\u003c {content:(i*3+3), check: true}\r\n        if amount_protein[i] \u003c= 20*3.5\r\n            amount_tmp = 20*3.5 - amount_protein[i]\r\n        else\r\n            amount_tmp = 0\r\n        end\r\n        add_amount \u003c\u003c amount_tmp\r\n        row \u003c\u003c \"#{amount_tmp.ceil} µl\"\r\n        op_table_2 \u003c\u003c row\r\n    end\r\n    \r\n    show do\r\n        title \"Sample Preparation\"\r\n        check \"Grab \u003cb\u003e#{op_count*3}\u003c/b\u003e tube(s) and label with ID from 1 to #{op_count*3}.\"\r\n        check \"Add PBS to tubes according to the table:\"\r\n        table op_table_2\r\n    end\r\n    \r\n    op_table = [[\"Sample ID (Stock)\",\"Volume\",\"Tube ID (Output)\"]]\r\n    all_output = []\r\n    for i in 0..(op_count-1)\r\n        # table\r\n        row = []\r\n        row \u003c\u003c op_in_before[i]\r\n        row \u003c\u003c \"70 µl\"\r\n        row \u003c\u003c (i*3+1)\r\n        op_table \u003c\u003c row\r\n        row = []\r\n        row \u003c\u003c op_in_after[i]\r\n        row \u003c\u003c \"70 µl\"\r\n        row \u003c\u003c (i*3+2)\r\n        op_table \u003c\u003c row \r\n        row = []\r\n        row \u003c\u003c op_in_protein[i]\r\n        row \u003c\u003c \"#{amount_protein[i]} µl\"\r\n        row \u003c\u003c (i*3+3)\r\n        op_table \u003c\u003c row\r\n        # all output IDs\r\n        all_output \u003c\u003c op_out_before[i]\r\n        all_output \u003c\u003c op_out_after[i]\r\n        all_output \u003c\u003c op_out_protein[i]\r\n    end\r\n    \r\n    show do\r\n        title \"Add Sample\"\r\n        check \"Pipette sample to corresponding tubes according to the table.\"\r\n        table op_table\r\n        check \"Retrun #{op_in_protein.to_sentence} on ice block after use.\"\r\n    end\r\n    \r\n    \r\n    op_table_1 = [[\"Tube ID\",\"Volume\"]]\r\n    all_output = []\r\n    for i in 0..(op_count-1)\r\n        # table\r\n        row = []\r\n        row \u003c\u003c {content:(i*3+1), check: true}\r\n        row \u003c\u003c \"70 µl\"\r\n        op_table_1 \u003c\u003c row\r\n        row = []\r\n        row \u003c\u003c {content:(i*3+2), check: true}\r\n        row \u003c\u003c \"70 µl\"\r\n        op_table_1 \u003c\u003c row \r\n        row = []\r\n        row \u003c\u003c {content:(i*3+3), check: true}\r\n        row \u003c\u003c \"#{(amount_protein[i] + add_amount[i]).ceil} µl\"\r\n        op_table_1 \u003c\u003c row\r\n        # all output IDs\r\n        all_output \u003c\u003c op_out_before[i]\r\n        all_output \u003c\u003c op_out_after[i]\r\n        all_output \u003c\u003c op_out_protein[i]\r\n    end\r\n    \r\n    show do\r\n    title \"Add sample buffer\"\r\n        check \"Grab sample buffer from 4°C refrigerator (R1-250).\"\r\n        check \"Pipette sample buffer to each tube according to the table. (Perform this step in fume hood)\"\r\n        table op_table_1\r\n        check \"Return the sample buffer to the 4°C refrigerator (R1-250).\"\r\n    end\r\n    \r\n    show do\r\n       title \"Heat samples\"\r\n       check \"Seal tube caps (ID from 1 to #{op_count*3}) with parafilm, preventing sample from popping out of a tube under boil.\"\r\n       check \"Heat samples for 10 minutes at 98°C.\"\r\n       timer initial: { hours: 0, minutes: 10, seconds: 0}\r\n       check \"Retrieve tubes from the heat block. Place samples on a rack.\"\r\n       check \"Turn off the heat block or set the temperature back to its setting.\"\r\n       check \"Remove the parafilm from the tubes.\"\r\n    end\r\n    \r\n    op_table_3 = [[\"Tube ID\",\"Sample ID\"]]\r\n    for i in 0..(op_count-1)\r\n        # table\r\n        row = []\r\n        row \u003c\u003c (i*3+1)\r\n        row \u003c\u003c {content:op_out_before[i], check: true}\r\n        op_table_3 \u003c\u003c row\r\n        row = []\r\n        row \u003c\u003c (i*3+2)\r\n        row \u003c\u003c {content:op_out_after[i], check: true}\r\n        op_table_3 \u003c\u003c row \r\n        row = []\r\n        row \u003c\u003c (i*3+3)\r\n        row \u003c\u003c {content:op_out_protein[i], check: true}\r\n        op_table_3 \u003c\u003c row\r\n    end\r\n    \r\n    show do\r\n       title \"Transfer samples\"\r\n       check \"Spin sample tubes at 17,000 g for 10 minutes.\"\r\n       check \"Grab \u003cb\u003e#{op_count*3}\u003c/b\u003e 1.5 mL tubes and label with sample ID according to the table.\"\r\n       check \"Transfer all the supernatant to new tubes according to the table.(Perform this step in fume hood)\"\r\n       table op_table_3\r\n       check \"Discard the tube labeled with ID from 1 to #{op_count*3}.\"\r\n       check \"Discard the tube labeled with ID:#{op_in_before.to_sentence}, #{op_in_after.to_sentence}\"\r\n    end\r\n    \r\n  end\r\n\r\n  def clean_up\r\n    show do\r\n        title \"Clean up\"\r\n        check \"Return the ice block.\"\r\n    end\r\n  end\r\n\r\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to prepare samples for SDS-PAGE analysis.\n\n- Workflow:\n  - Concentrate Protein \u003e *SDS-PAGE Sample Preparation* \u003e SDS-PAGE Analysis\n- Steps:\n  - [01] Grab all reserved samples: cell pellet before IPTG induction, cell pellet after IPTG induction and concentrated protein sample.\n  - [02] Add lysis buffer to first two samples and vortex to mix well.\n  - [03] Add sample buffer to all samples.\n  - [04] Heat at 95°C for 5 minutes.","test":"","timing":null}},{"sample_types":[{"id":82,"name":"Protein","description":"Protein","created_at":"2018-10-09T11:41:26.000-07:00","updated_at":"2018-10-09T11:41:26.000-07:00","field_types":[{"id":6524,"parent_id":82,"name":"Size","ftype":"number","choices":null,"array":false,"required":true,"created_at":"2018-10-30T20:47:00.000-07:00","updated_at":"2018-10-30T20:47:00.000-07:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]},{"id":7070,"parent_id":82,"name":"Wash_Buffer","ftype":"number","choices":"5,10,15,30,0","array":false,"required":true,"created_at":"2018-11-30T14:46:57.000-08:00","updated_at":"2018-11-30T14:46:57.000-08:00","parent_class":"SampleType","role":null,"part":null,"routing":null,"preferred_operation_type_id":null,"preferred_field_type_id":null,"allowable_field_types":[],"sample_types":[],"object_types":[]}]}],"object_types":[{"id":818,"name":"12% SDS Gel in Coomassie Staining","description":"Protein stained by coomassie blue","min":0,"max":1,"handler":"collection","safety":"No safety information","cleanup":"No cleanup information","data":"No data","vendor":"No vendor information","created_at":"2018-10-09T11:59:21.000-07:00","updated_at":"2018-10-30T18:52:33.000-07:00","unit":"Protein","cost":0.01,"release_method":"return","release_description":"","sample_type_id":82,"image":"","prefix":"","rows":1,"columns":3,"sample_type_name":"Protein"}],"operation_type":{"name":"Scan Gel","category":"Protein Purification","deployed":false,"on_the_fly":false,"field_types":[{"ftype":"sample","role":"input","name":"SDS Gel","sample_types":["Protein"],"object_types":["12% SDS Gel in Coomassie Staining"],"part":true,"array":false,"routing":"PR","preferred_operation_type_id":null,"preferred_field_type_id":null,"choices":null}],"protocol":"# Author: Pei Wu , Sep 2018\r\n# Modified from \"Cloning/Extract Gel Slice\"\r\n\r\nneeds \"Standard Libs/UploadHelper\"\r\nneeds \"Standard Libs/AssociationManagement\"\r\nneeds \"Standard Libs/Feedback\"\r\n\r\n\r\nclass Protocol\r\n  include Feedback\r\n  include UploadHelper, AssociationManagement\r\n    \r\n  # upload stuff\r\n  DIRNAME=\"\u003cwhere are gel files on computer\u003e\"\r\n  TRIES=3\r\n  \r\n  def main\r\n\r\n    operations.retrieve(interactive: true)\r\n    \r\n    take_out_filter\r\n    \r\n    # get gel images\r\n    gels = operations.map { |op| op.input(\"SDS Gel\").collection}.uniq\r\n    gels.each do |gel|\r\n    \r\n        grouped_ops=operations.select { |op| op.input(\"SDS Gel\").collection == gel }\r\n        image_name = \"gel_#{gel.id}\"\r\n        \r\n        # image gel\r\n        image_gel(gel,image_name)\r\n        \r\n        # upload image\r\n        ups = uploadData(\"#{DIRNAME}/#{image_name}\", 1, TRIES) # 1 file per gel\r\n        ups = [Upload.find(1)] if debug\r\n        \r\n        up=nil\r\n        if(!(ups.nil?))\r\n            up=ups[0]\r\n\r\n            gel_item = Item.find(gel.id)\r\n\r\n            # associate gel image to gel\r\n            gel_item.associate image_name, \"successfully imaged gel\", up\r\n          \r\n            grouped_ops.each do |op| # associate to all operations connected to gel\r\n                # description of where this op is in the gel, to be used as desc tag for image upload\r\n                location_in_gel = \"#{op.input(\"SDS Gel\").sample.name} is in row #{op.input(\"SDS Gel\").row + 1} and column #{op.input(\"SDS Gel\").column + 1}\"\r\n            \r\n                # associate image to op with a location description\r\n                op.associate image_name, location_in_gel, up\r\n            \r\n                # associate image to plan, or append new location to description if association already exists\r\n                existing_assoc = op.plan.get(image_name)\r\n                if existing_assoc \u0026\u0026 op.plan.upload(image_name) == up\r\n                    op.plan.modify(image_name, existing_assoc.to_s + \"\\n\" + location_in_gel, up)\r\n                else\r\n                    op.plan.associate image_name, location_in_gel , up\r\n                end\r\n            end\r\n        end\r\n        \r\n        # check lengths of fragments in gel\r\n        verify_protein_size(gel,grouped_ops)\r\n        \r\n        clean_up gel, gels\r\n    end\r\n    \r\n    put_filter_back\r\n    \r\n    get_protocol_feedback\r\n\r\n  end\r\n  \r\n  def check_gel_clean\r\n    show do\r\n        title \"Check on gels\"\r\n        check \"Check on gels with a manager.\"\r\n        bullet \"If blue dye has been removed from the gel matrix background and protein bands can be distinguished (as an example shown in the picture below), proceed to the next step .\"\r\n        bullet \"If the background is still in dark blue, fill the box half full of fresh DI water. Wash gels for another 1 hour.\"\r\n        image \"Actions/ProteinPurification/gel_staining.jpg\"\r\n    end\r\n  end\r\n  \r\n  def  take_out_filter\r\n    show do\r\n        title \"Set up the camera\"\r\n        check \"Take off the filter on the camera.\"\r\n        check \"Spray the light box with ethanol and wipe it dry with a paper towel.\"\r\n        check \"Place the light box on the UV light box for taking a photo. (as shown in the picture)\"\r\n        image \"Actions/ProteinPurification/light_box.jpg\"\r\n    end\r\n  end\r\n\r\n  \r\n  def image_gel(gel,image_name)\r\n    show do\r\n        title \"Image gel #{gel}\"\r\n        check \"Put the gel #{gel} on the light box and take a picture (protein marker is on the right side).\"\r\n        check \"Check to see if the picture matches the gel before uploading.\"\r\n        check \"Rename the picture you just took exactly as \u003cb\u003e#{image_name}\u003c/b\u003e\"\r\n    end\r\n  end\r\n  \r\n  def verify_protein_size(gel,grouped_ops)\r\n    op_table = [[\"Gel ID\",\"Well Number\",\"Batch - Sample\",\"Expected protein expression\"]]\r\n    well_no = 2\r\n    batch_no = 1\r\n\r\n    grouped_ops.each do |op|\r\n        # before\r\n        row = []\r\n        row \u003c\u003c op.input(\"SDS Gel\").item.id\r\n        row \u003c\u003c well_no\r\n        row \u003c\u003c \"#{batch_no} - 1\"\r\n        #row \u003c\u003c \"Before IPTG\"\r\n        row \u003c\u003c {content:\"Uninduced\", style:{color:\"#90D\"}}\r\n        op_table \u003c\u003c row\r\n        well_no = well_no + 1\r\n        # after\r\n        row = []\r\n        row \u003c\u003c op.input(\"SDS Gel\").item.id\r\n        row \u003c\u003c well_no\r\n        row \u003c\u003c \"#{batch_no} - 2\"\r\n        #row \u003c\u003c \"After IPTG\"\r\n        row \u003c\u003c {content: \"Induced\", style:{color:\"#90D\"}}\r\n        op_table \u003c\u003c row\r\n        well_no = well_no + 1\r\n        # sample\r\n        row = []\r\n        row \u003c\u003c op.input(\"SDS Gel\").item.id\r\n        row \u003c\u003c well_no\r\n        row \u003c\u003c \"#{batch_no} - 3\"\r\n        #row \u003c\u003c \"Protein Sample\"\r\n        row \u003c\u003c {content: \"Purified\", style:{color:\"#90D\"}}\r\n        op_table \u003c\u003c row\r\n        well_no = well_no + 1\r\n        \r\n        batch_no = batch_no + 1\r\n    end\r\n\r\n    show {\r\n        title \"Verify protein expression\"\r\n        bullet \"Verify samples on gel #{gel}:\"\r\n        table grouped_ops.start_table\r\n          .custom_column(heading: \"Gel ID\") { |op| op.input(\"SDS Gel\").item.id }\r\n          .custom_column(heading: \"Batch Number\", checkable: false) { |op| op.input(\"SDS Gel\").column + 1 }\r\n          .custom_column(heading: \"Expected Protein Size\") { |op| op.input(\"SDS Gel\").sample.properties[\"Size\"] }\r\n          .get(:correct, type: 'text', heading: \"Does the bands of one data set match the expected result? (y/n)\", default: 'y')\r\n          .custom_column(heading: \"User\") { |op| op.user.name }\r\n        .end_table\r\n        bullet \"\u003cb\u003eTo verify a protein expression, every three wells are viewed as a data set for a batch. In the following table, 1-1, 1-2 and 1-3 are considered as one data set to verify a protein expression. The same condition applies to 2-1, 2-2 and 2-3 and so on.\u003c/b\u003e\"\r\n        note\"Expected protein expression of each well:\"\r\n        table op_table\r\n        bullet \"Example: expected protein expresssion for three kinds of proteins\"\r\n        image \"Actions/ProteinPurification/expected_protein_expression.jpg\"\r\n    }\r\n  end\r\n  \r\n  def clean_up gel, gels\r\n      show {\r\n        title \"Discard gel\"\r\n        check \"Dispose of the gel #{gel} into waste container.\"\r\n      }\r\n    end\r\n    \r\n    \r\n def put_filter_back\r\n    show do\r\n        title \"Clean up\"\r\n        check \"Spray the surface of the light box with ethanol and wipe it dry with a paper towel. Place it on the shelf.\"\r\n        check \"Reassemble the filter to the camera.\"\r\n        check \"Remove the label from the gel box.\"\r\n        check \"Clean up the gel box by rinsing with water. Return it to the gel station.\"\r\n    end\r\n  end\r\n\r\nend","precondition":"def precondition(_op)\n  true\nend","cost_model":"def cost(_op)\n  { labor: 0, materials: 0 }\nend","documentation":"The objective of this protocol is to verify protein expression.\n\n- Workflow:\n  - SDS-PAGE Analysis \u003e *Scan Gel*\n- Steps:\n  - [01] Place the gel on a light box and take a picture.\n  - [02] verify the protein expression.","test":"","timing":null}}]}